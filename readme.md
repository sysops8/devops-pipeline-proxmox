# The Ultimate CI/CD Corporate DevOps Pipeline Project

> –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é enterprise-grade CI/CD –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ Proxmox

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Kubernetes](https://img.shields.io/badge/Kubernetes-K3s-326CE5?logo=kubernetes)](https://k3s.io/)
[![Jenkins](https://img.shields.io/badge/Jenkins-CI%2FCD-D24939?logo=jenkins)](https://www.jenkins.io/)
[![Terraform](https://img.shields.io/badge/Terraform-IaC-7B42BC?logo=terraform)](https://www.terraform.io/)

<img width="1150" height="824" alt="image" src="https://github.com/user-attachments/assets/a7ac7ef6-d24a-4506-8dcf-cd5088571936" />


## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û –ø—Ä–æ–µ–∫—Ç–µ](#–æ-–ø—Ä–æ–µ–∫—Ç–µ)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–î–µ—Ç–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞](#–¥–µ—Ç–∞–ª—å–Ω–∞—è-—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
  - [–≠—Ç–∞–ø 1: –°–µ—Ç–µ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞](#—ç—Ç–∞–ø-1-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-—Å–µ—Ç–µ–≤–æ–π-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã)
  - [–≠—Ç–∞–ø 2: –°–æ–∑–¥–∞–Ω–∏–µ VM —á–µ—Ä–µ–∑ Terraform](#—ç—Ç–∞–ø-2-–ø–ª–∞–Ω-–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö-–º–∞—à–∏–Ω)
  - [–≠—Ç–∞–ø 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ K3s –∫–ª–∞—Å—Ç–µ—Ä–∞](#—ç—Ç–∞–ø-3-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-k3s-–∫–ª–∞—Å—Ç–µ—Ä–∞)
  - [–≠—Ç–∞–ø 4: MetalLB Load Balancer](#—ç—Ç–∞–ø-4-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-metallb-load-balancer)
  - [–≠—Ç–∞–ø 5: Traefik Ingress](#—ç—Ç–∞–ø-5-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-traefik-ingress)
  - [–≠—Ç–∞–ø 6: Cloudflare Tunnel](#—ç—Ç–∞–ø-6-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–≤–Ω–µ—à–Ω–µ–≥–æ-–¥–æ—Å—Ç—É–ø–∞-—á–µ—Ä–µ–∑-cloudflare-tunnel)
  - [–≠—Ç–∞–ø 7: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤](#—ç—Ç–∞–ø-7-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤-–Ω–∞-vm)
  - [–≠—Ç–∞–ø 8: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Jenkins](#—ç—Ç–∞–ø-8-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-jenkins-pipeline)
  - [–≠—Ç–∞–ø 9: Jenkins Pipeline](#—ç—Ç–∞–ø-9-—Å–æ–∑–¥–∞–Ω–∏–µ-jenkins-pipeline)
  - [–≠—Ç–∞–ø 10: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Jenkins](#—ç—Ç–∞–ø-10-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞-–Ω–∞-jenkins)
  - [–≠—Ç–∞–ø 11: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å K8s](#—ç—Ç–∞–ø-11-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏-k8s)
  - [–≠—Ç–∞–ø 12: –ó–∞–ø—É—Å–∫ Pipeline](#—ç—Ç–∞–ø-12-–∑–∞–ø—É—Å–∫-pipeline)
  - [–≠—Ç–∞–ø 13: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤](#—ç—Ç–∞–ø-13-–ø—Ä–æ–≤–µ—Ä–∫–∞-—Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
  - [–≠—Ç–∞–ø 14: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è](#—ç—Ç–∞–ø-14-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è-–∏-best-practices)
  - [–≠—Ç–∞–ø 15: Troubleshooting](#—ç—Ç–∞–ø-15-troubleshooting)
  - [–≠—Ç–∞–ø 16: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞](#—ç—Ç–∞–ø-16-—Ñ–∏–Ω–∞–ª—å–Ω–∞—è-–ø—Ä–æ–≤–µ—Ä–∫–∞)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
- [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
- [Backup –∏ Recovery](#backup-–∏-recovery)
- [FAQ](#faq)
- [Contributing](#contributing)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## üéØ –û –ø—Ä–æ–µ–∫—Ç–µ

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø–æ–ª–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ CI/CD pipeline –Ω–∞ –±–∞–∑–µ **Proxmox** –≤–º–µ—Å—Ç–æ AWS. –ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è –Ω–∞–≤—ã–∫–æ–≤ DevOps –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –≤ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ/—Ä–µ–∑—é–º–µ.

### –ß—Ç–æ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ

- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π CI/CD pipeline
- ‚úÖ Kubernetes –∫–ª–∞—Å—Ç–µ—Ä (K3s) —Å 3 –Ω–æ–¥–∞–º–∏
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ Cloudflare Tunnel
- ‚úÖ –ü–æ–ª–Ω—ã–π —Å—Ç–µ–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (Prometheus + Grafana)
- ‚úÖ –ü—Ä–∏–≤–∞—Ç–Ω—ã–π container registry (Harbor)
- ‚úÖ –ê–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ (SonarQube)
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º–∏ (Nexus)
- ‚úÖ –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (Trivy)
- ‚úÖ Infrastructure as Code (Terraform)

### –û—Ç–ª–∏—á–∏—è –æ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

| AWS | Proxmox –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ |
|-----|----------------------|
| VPC | Proxmox Bridge (vmbr1) |
| EC2 | Proxmox VM |
| EKS | K3s cluster |
| ELB | MetalLB + Traefik |
| Route53 | Cloudflare Tunnel |
| DockerHub Private | Harbor Registry |

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Internet
    ‚Üì
Cloudflare Tunnel (Proxmox —Ö–æ—Å—Ç)
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Proxmox Network (vmbr1)                     ‚îÇ
‚îÇ         192.168.100.0/24                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ  ‚îÇ   Jenkins    ‚îÇ  ‚îÇ  SonarQube   ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ 192.168.100  ‚îÇ  ‚îÇ 192.168.100  ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ    .20:8080  ‚îÇ  ‚îÇ    .30:9000  ‚îÇ               ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ  ‚îÇ   Nexus      ‚îÇ  ‚îÇ   Harbor     ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ 192.168.100  ‚îÇ  ‚îÇ 192.168.100  ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ    .31:8081  ‚îÇ  ‚îÇ    .32:443   ‚îÇ               ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ  ‚îÇ      Monitoring (192.168.100.40)    ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ  Prometheus:9090  Grafana:3000      ‚îÇ          ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ  ‚îÇ      K3s Cluster                     ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ                                       ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ Master (192.168.100.10)         ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ Worker1 (192.168.100.11)        ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ Worker2 (192.168.100.12)        ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ                                       ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ  MetalLB Pool: 192.168.100.100-150  ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ  Traefik Ingress Controller         ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ  Application Pods (Boardgame)       ‚îÇ          ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îÇ                                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Pipeline Flow

```mermaid
graph LR
    A[Git Push] --> B[Jenkins Webhook]
    B --> C[Git Checkout]
    C --> D[Compile Maven]
    D --> E[Unit Tests]
    E --> F[SonarQube Analysis]
    F --> G[Quality Gate]
    G --> H[Trivy FS Scan]
    H --> I[Build JAR]
    I --> J[Publish to Nexus]
    J --> K[Build Docker Image]
    K --> L[Trivy Image Scan]
    L --> M[Push to Harbor]
    M --> N[Deploy to K8s]
    N --> O[Verify Deployment]
    O --> P[Email Notification]
```

---

## üíª –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

**Proxmox —Ö–æ—Å—Ç:**
- CPU: 12+ cores (Ryzen 3900 –∏–ª–∏ –∞–Ω–∞–ª–æ–≥)
- RAM: 64GB
- Storage: 2TB HDD + 2TB SSD
- Network: 1Gbps

**Windows –º–∞—à–∏–Ω–∞ (–¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è):**
- CPU: 4+ cores
- RAM: 16GB+
- Storage: 100GB

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

**–ù–∞ Proxmox:**
- Proxmox VE 8.0+
- –î–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ SSH

**–ù–∞ Windows –º–∞—à–∏–Ω–µ:**
- WSL2 –∏–ª–∏ Git Bash
- Terraform >= 1.5.0
- kubectl >= 1.28.0
- Helm >= 3.12.0
- SSH client

### –°–µ—Ç–µ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–µ—Ç—å: `10.0.10.0/24` (—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è)
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–µ—Ç—å: `192.168.100.0/24` (–±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞)
- –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–æ—Å—Ç—É–ø —Å —Å–µ—Ä—ã–º IP
- Cloudflare –∞–∫–∫–∞—É–Ω—Ç (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π)

### –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã

- GitHub (–¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è)
- Cloudflare (–¥–ª—è —Ç—É–Ω–Ω–µ–ª—è)
- Gmail (–¥–ª—è email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/YOUR_USERNAME/devops-pipeline-proxmox.git
cd devops-pipeline-proxmox

# 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Terraform
cd terraform
cp terraform.tfvars.example terraform.tfvars
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ terraform.tfvars —Å –≤–∞—à–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

# 3. –°–æ–∑–¥–∞–π—Ç–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
terraform init
terraform plan
terraform apply -auto-approve

# 4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ K3s (–Ω–∞ master node)
ssh ubuntu@192.168.100.10
curl -sfL https://get.k3s.io | INSTALL_K3S_EXEC="--disable traefik" sh -

# 5. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
./scripts/install-all.sh

# 6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Jenkins pipeline
# Jenkins ‚Üí New Item ‚Üí boardgame-pipeline ‚Üí Build Now
```

**‚è±Ô∏è –û–±—â–µ–µ –≤—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏: ~2-3 —á–∞—Å–∞**

---

## üìö –î–µ—Ç–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

## –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ç–µ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### 1.1 –°–æ–∑–¥–∞–Ω–∏–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–µ—Ç–∏ –≤ Proxmox

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ Proxmox —Ö–æ—Å—Ç—É:

```bash
ssh root@10.0.10.200
```

–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π bridge –¥–ª—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–µ—Ç–∏:

```bash
cat >> /etc/network/interfaces <<EOF

# DevOps Project Network
auto vmbr1
iface vmbr1 inet static
    address 192.168.100.1/24
    bridge-ports none
    bridge-stp off
    bridge-fd 0
    post-up iptables -t nat -A POSTROUTING -s 192.168.100.0/24 -o vmbr0 -j MASQUERADE
    post-down iptables -t nat -D POSTROUTING -s 192.168.100.0/24 -o vmbr0 -j MASQUERADE
EOF
```

–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

```bash
ifreload -a
```

–í–∫–ª—é—á–∏—Ç–µ IP forwarding:

```bash
echo "net.ipv4.ip_forward=1" >> /etc/sysctl.conf
sysctl -p
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π bridge:

```bash
ip addr show vmbr1
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: 192.168.100.1/24
```

---

## –≠—Ç–∞–ø 2: –ü–ª–∞–Ω –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω

### 2.1 –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è VM

| –ò–º—è VM | CPU | RAM | Disk | IP | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|--------|-----|-----|------|-----|-----------|
| k3s-master | 4 | 8GB | 50GB | 192.168.100.10 | K3s Control Plane |
| k3s-worker1 | 4 | 8GB | 50GB | 192.168.100.11 | K3s Worker Node |
| k3s-worker2 | 4 | 8GB | 50GB | 192.168.100.12 | K3s Worker Node |
| jenkins | 4 | 8GB | 60GB | 192.168.100.20 | Jenkins CI/CD |
| sonarqube | 2 | 4GB | 30GB | 192.168.100.30 | Code Quality |
| nexus | 2 | 4GB | 40GB | 192.168.100.31 | Artifact Repository |
| harbor | 2 | 4GB | 50GB | 192.168.100.32 | Container Registry |
| monitoring | 4 | 6GB | 40GB | 192.168.100.40 | Prometheus+Grafana |
| jumphost | 4 | 2GB | 10GB | 192.168.100.5 | Jumphost |

**–ò—Ç–æ–≥–æ:** 24 vCPU, 46GB RAM, 360GB Storage

### 2.2 –°–æ–∑–¥–∞–Ω–∏–µ Ubuntu Cloud-Init Template

–ù–∞ Proxmox —Ö–æ—Å—Ç–µ:

```bash
cd /var/lib/vz/template/iso/

# –°–∫–∞—á–∏–≤–∞–µ–º Ubuntu 22.04 Cloud Image
wget https://cloud-images.ubuntu.com/jammy/current/jammy-server-cloudimg-amd64.img

# –°–æ–∑–¥–∞–µ–º VM template (ID 9000)
qm create 9000 --name ubuntu-2204-template --memory 2048 --cores 2 --net0 virtio,bridge=vmbr1

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –¥–∏—Å–∫
qm importdisk 9000 jammy-server-cloudimg-amd64.img local-lvm

# –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ–º –¥–∏—Å–∫
qm set 9000 --scsihw virtio-scsi-pci --scsi0 local-lvm:vm-9000-disk-0

# –î–æ–±–∞–≤–ª—è–µ–º Cloud-Init
qm set 9000 --ide2 local-lvm:cloudinit

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º boot
qm set 9000 --boot c --bootdisk scsi0

# –î–æ–±–∞–≤–ª—è–µ–º serial console
qm set 9000 --serial0 socket --vga serial0

# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ template
qm template 9000
```

### 2.3 Terraform –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è Terraform:

```bash
mkdir -p ~/devops-pipeline-proxmox/terraform
cd ~/devops-pipeline-proxmox/terraform
```

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `providers.tf`:

```hcl
terraform {
  required_version = ">= 1.5.0"
  
  required_providers {
    proxmox = {
      source  = "telmate/proxmox"
      version = "2.9.14"
    }
  }
}

provider "proxmox" {
  pm_api_url      = var.proxmox_api_url
  pm_user         = var.proxmox_user
  pm_password     = var.proxmox_password
  pm_tls_insecure = true
}
```

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `variables.tf`:

```hcl
variable "proxmox_api_url" {
  description = "Proxmox API URL"
  type        = string
  default     = "https://10.0.10.200:8006/api2/json"
}

variable "proxmox_user" {
  description = "Proxmox user"
  type        = string
  default     = "root@pam"
}

variable "proxmox_password" {
  description = "Proxmox password"
  type        = string
  sensitive   = true
}

variable "ssh_public_key" {
  description = "SSH public key for VM access"
  type        = string
}

variable "target_node" {
  description = "Proxmox node name"
  type        = string
  default     = "pve"
}
```

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `main.tf`:

```hcl
# K3s Master Node
resource "proxmox_vm_qemu" "k3s_master" {
  name        = "k3s-master"
  target_node = var.target_node
  clone       = "ubuntu-2204-template"
  
  cores   = 4
  memory  = 8192
  
  disk {
    size    = "50G"
    type    = "scsi"
    storage = "local-lvm"
  }
  
  network {
    model  = "virtio"
    bridge = "vmbr1"
  }
  
  ipconfig0  = "ip=192.168.100.10/24,gw=192.168.100.1"
  nameserver = "8.8.8.8"
  ciuser     = "ubuntu"
  sshkeys    = var.ssh_public_key
}

# K3s Worker Nodes
resource "proxmox_vm_qemu" "k3s_workers" {
  count       = 2
  name        = "k3s-worker${count.index + 1}"
  target_node = var.target_node
  clone       = "ubuntu-2204-template"
  
  cores   = 4
  memory  = 8192
  
  disk {
    size    = "50G"
    type    = "scsi"
    storage = "local-lvm"
  }
  
  network {
    model  = "virtio"
    bridge = "vmbr1"
  }
  
  ipconfig0  = "ip=192.168.100.${11 + count.index}/24,gw=192.168.100.1"
  nameserver = "8.8.8.8"
  ciuser     = "ubuntu"
  sshkeys    = var.ssh_public_key
}

# Jenkins Server
resource "proxmox_vm_qemu" "jenkins" {
  name        = "jenkins"
  target_node = var.target_node
  clone       = "ubuntu-2204-template"
  
  cores   = 4
  memory  = 8192
  
  disk {
    size    = "60G"
    type    = "scsi"
    storage = "local-lvm"
  }
  
  network {
    model  = "virtio"
    bridge = "vmbr1"
  }
  
  ipconfig0  = "ip=192.168.100.20/24,gw=192.168.100.1"
  nameserver = "8.8.8.8"
  ciuser     = "ubuntu"
  sshkeys    = var.ssh_public_key
}

# SonarQube Server
resource "proxmox_vm_qemu" "sonarqube" {
  name        = "sonarqube"
  target_node = var.target_node
  clone       = "ubuntu-2204-template"
  
  cores   = 2
  memory  = 4096
  
  disk {
    size    = "30G"
    type    = "scsi"
    storage = "local-lvm"
  }
  
  network {
    model  = "virtio"
    bridge = "vmbr1"
  }
  
  ipconfig0  = "ip=192.168.100.30/24,gw=192.168.100.1"
  nameserver = "8.8.8.8"
  ciuser     = "ubuntu"
  sshkeys    = var.ssh_public_key
}

# Nexus Server
resource "proxmox_vm_qemu" "nexus" {
  name        = "nexus"
  target_node = var.target_node
  clone       = "ubuntu-2204-template"
  
  cores   = 2
  memory  = 4096
  
  disk {
    size    = "40G"
    type    = "scsi"
    storage = "local-lvm"
  }
  
  network {
    model  = "virtio"
    bridge = "vmbr1"
  }
  
  ipconfig0  = "ip=192.168.100.31/24,gw=192.168.100.1"
  nameserver = "8.8.8.8"
  ciuser     = "ubuntu"
  sshkeys    = var.ssh_public_key
}

# Harbor Registry
resource "proxmox_vm_qemu" "harbor" {
  name        = "harbor"
  target_node = var.target_node
  clone       = "ubuntu-2204-template"
  
  cores   = 2
  memory  = 4096
  
  disk {
    size    = "50G"
    type    = "scsi"
    storage = "local-lvm"
  }
  
  network {
    model  = "virtio"
    bridge = "vmbr1"
  }
  
  ipconfig0  = "ip=192.168.100.32/24,gw=192.168.100.1"
  nameserver = "8.8.8.8"
  ciuser     = "ubuntu"
  sshkeys    = var.ssh_public_key
}

# Monitoring Server
resource "proxmox_vm_qemu" "monitoring" {
  name        = "monitoring"
  target_node = var.target_node
  clone       = "ubuntu-2204-template"
  
  cores   = 4
  memory  = 6144
  
  disk {
    size    = "40G"
    type    = "scsi"
    storage = "local-lvm"
  }
  
  network {
    model  = "virtio"
    bridge = "vmbr1"
  }
  
  ipconfig0  = "ip=192.168.100.40/24,gw=192.168.100.1"
  nameserver = "8.8.8.8"
  ciuser     = "ubuntu"
  sshkeys    = var.ssh_public_key
}
```

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `outputs.tf`:

```hcl
output "k3s_master_ip" {
  value = proxmox_vm_qemu.k3s_master.default_ipv4_address
}

output "k3s_workers_ips" {
  value = proxmox_vm_qemu.k3s_workers[*].default_ipv4_address
}

output "jenkins_ip" {
  value = proxmox_vm_qemu.jenkins.default_ipv4_address
}

output "sonarqube_ip" {
  value = proxmox_vm_qemu.sonarqube.default_ipv4_address
}

output "nexus_ip" {
  value = proxmox_vm_qemu.nexus.default_ipv4_address
}

output "harbor_ip" {
  value = proxmox_vm_qemu.harbor.default_ipv4_address
}

output "monitoring_ip" {
  value = proxmox_vm_qemu.monitoring.default_ipv4_address
}
```

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `terraform.tfvars`:

```hcl
proxmox_api_url  = "https://10.0.10.200:8006/api2/json"
proxmox_user     = "root@pam"
proxmox_password = "YOUR_PROXMOX_PASSWORD"
ssh_public_key   = "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAA... your-key-here"
target_node      = "pve"
```

### 2.4 –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ VM

```bash
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Terraform
terraform init

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–ª–∞–Ω–∞
terraform plan

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
terraform apply

# –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ: yes
```

**‚è±Ô∏è –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ~10 –º–∏–Ω—É—Ç**

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ VM:

```bash
terraform output
```

---

## –≠—Ç–∞–ø 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ K3s –∫–ª–∞—Å—Ç–µ—Ä–∞

### 3.1 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ K3s Master Node

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ master node:

```bash
ssh ubuntu@192.168.100.10
```

–û–±–Ω–æ–≤–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É:

```bash
sudo apt update && sudo apt upgrade -y
```

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ K3s (–±–µ–∑ Traefik, —É—Å—Ç–∞–Ω–æ–≤–∏–º –ø–æ–∑–∂–µ):

```bash
curl -sfL https://get.k3s.io | INSTALL_K3S_EXEC="--disable traefik --node-ip=192.168.100.10" sh -
```

–ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –¥–ª—è worker nodes:

```bash
sudo cat /var/lib/rancher/k3s/server/node-token
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω!** –ü—Ä–∏–º–µ—Ä: `K10abc123def456::server:xyz789`

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:

```bash
sudo systemctl status k3s
sudo kubectl get nodes
```

### 3.2 –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Worker Nodes

**–ù–∞ k3s-worker1:**

```bash
ssh ubuntu@192.168.100.11

curl -sfL https://get.k3s.io | K3S_URL=https://192.168.100.10:6443 \
  K3S_TOKEN="YOUR_TOKEN_FROM_MASTER" \
  sh -
```

**–ù–∞ k3s-worker2:**

```bash
ssh ubuntu@192.168.100.12

curl -sfL https://get.k3s.io | K3S_URL=https://192.168.100.10:6443 \
  K3S_TOKEN="YOUR_TOKEN_FROM_MASTER" \
  sh -
```

### 3.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞

–ù–∞ master node:

```bash
sudo kubectl get nodes
```

–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:

```
NAME          STATUS   ROLES                  AGE   VERSION
k3s-master    Ready    control-plane,master   5m    v1.28.x
k3s-worker1   Ready    <none>                 2m    v1.28.x
k3s-worker2   Ready    <none>                 2m    v1.28.x
```

### 3.4 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ kubectl –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ

–ù–∞ –≤–∞—à–µ–π Windows –º–∞—à–∏–Ω–µ (WSL/Git Bash):

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è kubeconfig
mkdir -p ~/.kube

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ kubeconfig —Å master node
scp ubuntu@192.168.100.10:/etc/rancher/k3s/k3s.yaml ~/.kube/config

# –ò–∑–º–µ–Ω–∏—Ç–µ server URL
sed -i 's/127.0.0.1/192.168.100.10/' ~/.kube/config

# –ü—Ä–æ–≤–µ—Ä–∫–∞
kubectl get nodes
```

---

## –≠—Ç–∞–ø 4: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ MetalLB (Load Balancer)

### 4.1 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ MetalLB

```bash
# –ü—Ä–∏–º–µ–Ω—è–µ–º –º–∞–Ω–∏—Ñ–µ—Å—Ç
kubectl apply -f https://raw.githubusercontent.com/metallb/metallb/v0.13.12/config/manifests/metallb-native.yaml

# –ñ–¥–µ–º –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
kubectl wait --namespace metallb-system \
  --for=condition=ready pod \
  --selector=app=metallb \
  --timeout=90s
```

### 4.2 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è IP Pool

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `metallb-config.yaml`:

```yaml
apiVersion: metallb.io/v1beta1
kind: IPAddressPool
metadata:
  name: default-pool
  namespace: metallb-system
spec:
  addresses:
  - 192.168.100.100-192.168.100.150

---
apiVersion: metallb.io/v1beta1
kind: L2Advertisement
metadata:
  name: default
  namespace: metallb-system
spec:
  ipAddressPools:
  - default-pool
```

–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

```bash
kubectl apply -f metallb-config.yaml
```

–ü—Ä–æ–≤–µ—Ä–∫–∞:

```bash
kubectl get ipaddresspools -n metallb-system
kubectl get l2advertisements -n metallb-system
```

---

## –≠—Ç–∞–ø 5: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Traefik Ingress

### 5.1 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Helm

```bash
curl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash
```

### 5.2 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Traefik

```bash
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
helm repo add traefik https://traefik.github.io/charts
helm repo update

# –°–æ–∑–¥–∞–Ω–∏–µ namespace
kubectl create namespace traefik

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Traefik
helm install traefik traefik/traefik \
  --namespace traefik \
  --set service.type=LoadBalancer \
  --set ports.web.port=80 \
  --set ports.websecure.port=443
```

### 5.3 –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
kubectl get svc -n traefik

# –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å EXTERNAL-IP –∏–∑ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ MetalLB (–Ω–∞–ø—Ä–∏–º–µ—Ä, 192.168.100.100)
```

---

## –≠—Ç–∞–ø 6: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ Cloudflare Tunnel

### 6.1 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ cloudflared –Ω–∞ Proxmox —Ö–æ—Å—Ç–µ

```bash
ssh root@10.0.10.200

# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ
wget https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64.deb
sudo dpkg -i cloudflared-linux-amd64.deb

# –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–æ—Ç–∫—Ä–æ–µ—Ç –±—Ä–∞—É–∑–µ—Ä)
cloudflared tunnel login

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç—É–Ω–Ω–µ–ª—è
cloudflared tunnel create devops-pipeline
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ:**
- Tunnel ID
- Path to credentials file

### 6.2 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç—É–Ω–Ω–µ–ª—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `/etc/cloudflared/config.yml`:

```yaml
tunnel: YOUR_TUNNEL_ID
credentials-file: /root/.cloudflared/YOUR_TUNNEL_ID.json

ingress:
  # Jenkins
  - hostname: jenkins.your-domain.com
    service: http://192.168.100.20:8080
  
  # SonarQube
  - hostname: sonar.your-domain.com
    service: http://192.168.100.30:9000
  
  # Nexus
  - hostname: nexus.your-domain.com
    service: http://192.168.100.31:8081
  
  # Harbor
  - hostname: harbor.your-domain.com
    service: https://192.168.100.32
    originServerName: harbor.your-domain.com
  
  # Grafana
  - hostname: grafana.your-domain.com
    service: http://192.168.100.40:3000
  
  # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ K8s (wildcard)
  - hostname: "*.apps.your-domain.com"
    service: http://192.168.100.100:80
  
  # Catch-all
  - service: http_status:404
```

### 6.3 –°–æ–∑–¥–∞–Ω–∏–µ DNS –∑–∞–ø–∏—Å–µ–π

```bash
# –î–ª—è –∫–∞–∂–¥–æ–≥–æ hostname —Å–æ–∑–¥–∞–π—Ç–µ CNAME –∑–∞–ø–∏—Å—å
cloudflared tunnel route dns devops-pipeline jenkins.your-domain.com
cloudflared tunnel route dns devops-pipeline sonar.your-domain.com
cloudflared tunnel route dns devops-pipeline nexus.your-domain.com
cloudflared tunnel route dns devops-pipeline harbor.your-domain.com
cloudflared tunnel route dns devops-pipeline grafana.your-domain.com
cloudflared tunnel route dns devops-pipeline "*.apps.your-domain.com"
```

### 6.4 –ó–∞–ø—É—Å–∫ —Ç—É–Ω–Ω–µ–ª—è –∫–∞–∫ systemd —Å–µ—Ä–≤–∏—Å–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–∞
sudo cloudflared service install

# –ó–∞–ø—É—Å–∫
sudo systemctl start cloudflared
sudo systemctl enable cloudflared

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo systemctl status cloudflared

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
sudo journalctl -u cloudflared -f
```

**–¢–µ–ø–µ—Ä—å –≤—Å–µ –≤–∞—à–∏ —Å–µ—Ä–≤–∏—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ HTTPS —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏!**

---

## –≠—Ç–∞–ø 7: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ VM

### 7.1 Jenkins Server (192.168.100.20)

```bash
ssh ubuntu@192.168.100.20

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo usermod -aG docker ubuntu
sudo usermod -aG docker jenkins

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Java 17
sudo apt install -y openjdk-17-jdk

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Jenkins
wget -q -O - https://pkg.jenkins.io/debian-stable/jenkins.io.key | sudo apt-key add -
sudo sh -c 'echo deb http://pkg.jenkins.io/debian-stable binary/ > /etc/apt/sources.list.d/jenkins.list'
sudo apt update
sudo apt install -y jenkins

# –ó–∞–ø—É—Å–∫ Jenkins
sudo systemctl start jenkins
sudo systemctl enable jenkins

# –ü–æ–ª—É—á–µ–Ω–∏–µ initial admin password
sudo cat /var/lib/jenkins/secrets/initialAdminPassword
```

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ kubectl:**

```bash
curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"
sudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ kubeconfig –¥–ª—è Jenkins
sudo mkdir -p /var/lib/jenkins/.kube
sudo scp ubuntu@192.168.100.10:/home/ubuntu/.kube/config /var/lib/jenkins/.kube/config
sudo chown jenkins:jenkins /var/lib/jenkins/.kube/config
```

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Trivy:**

```bash
wget -qO - https://aquasecurity.github.io/trivy-repo/deb/public.key | sudo apt-key add -
echo "deb https://aquasecurity.github.io/trivy-repo/deb $(lsb_release -sc) main" | sudo tee -a /etc/apt/sources.list.d/trivy.list
sudo apt update
sudo apt install -y trivy
```

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Maven:**

```bash
sudo apt install -y maven
mvn --version
```

**–î–æ—Å—Ç—É–ø:** `https://jenkins.your-domain.com`

### 7.2 SonarQube Server (192.168.100.30)

```bash
ssh ubuntu@192.168.100.30

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo usermod -aG docker ubuntu

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã –¥–ª—è SonarQube
sudo sysctl -w vm.max_map_count=524288
sudo sysctl -w fs.file-max=131072
echo "vm.max_map_count=524288" | sudo tee -a /etc/sysctl.conf
echo "fs.file-max=131072" | sudo tee -a /etc/sysctl.conf

# –ó–∞–ø—É—Å–∫ SonarQube
docker run -d \
  --name sonarqube \
  --restart=unless-stopped \
  -p 9000:9000 \
  -e SONAR_ES_BOOTSTRAP_CHECKS_DISABLE=true \
  -v sonarqube_data:/opt/sonarqube/data \
  -v sonarqube_extensions:/opt/sonarqube/extensions \
  -v sonarqube_logs:/opt/sonarqube/logs \
  sonarqube:lts-community
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**

```bash
docker ps
docker logs -f sonarqube
```

**–î–æ—Å—Ç—É–ø:** `https://sonar.your-domain.com`  
**–õ–æ–≥–∏–Ω:** admin/admin (–∏–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞)

### 7.3 Nexus Repository (192.168.100.31)

```bash
ssh ubuntu@192.168.100.31

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# –ó–∞–ø—É—Å–∫ Nexus
docker run -d \
  --name nexus \
  --restart=unless-stopped \
  -p 8081:8081 \
  -v nexus-data:/nexus-data \
  sonatype/nexus3

# –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ (~2 –º–∏–Ω—É—Ç—ã)
sleep 120

# –ü–æ–ª—É—á–µ–Ω–∏–µ initial admin password
docker exec nexus cat /nexus-data/admin.password
```

**–î–æ—Å—Ç—É–ø:** `https://nexus.your-domain.com`  
**–õ–æ–≥–∏–Ω:** admin + –ø–∞—Ä–æ–ª—å –∏–∑ –∫–æ–º–∞–Ω–¥—ã –≤—ã—à–µ

**–°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤:**
1. Sign in
2. Server administration (—à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∞) ‚Üí Repositories ‚Üí Create repository
3. –°–æ–∑–¥–∞–π—Ç–µ: `maven-releases` (maven2 hosted)
4. –°–æ–∑–¥–∞–π—Ç–µ: `maven-snapshots` (maven2 hosted)

### 7.4 Harbor Registry (192.168.100.32)

```bash
ssh ubuntu@192.168.100.32

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –∏ Docker Compose
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo apt install -y docker-compose

# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ Harbor
cd ~
wget https://github.com/goharbor/harbor/releases/download/v2.9.0/harbor-offline-installer-v2.9.0.tgz
tar xzvf harbor-offline-installer-v2.9.0.tgz
cd harbor

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
cp harbor.yml.tmpl harbor.yml
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `harbor.yml`:

```bash
nano harbor.yml
```

–ò–∑–º–µ–Ω–∏—Ç–µ:

```yaml
hostname: harbor.your-domain.com

# –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ HTTPS –¥–ª—è –Ω–∞—á–∞–ª–∞ (–Ω–∞—Å—Ç—Ä–æ–∏–º —á–µ—Ä–µ–∑ Cloudflare)
# https:
#   port: 443
#   certificate: /your/certificate/path
#   private_key: /your/private/key/path

harbor_admin_password: YourSecurePassword123!

database:
  password: root123

data_volume: /data
```

–£—Å—Ç–∞–Ω–æ–≤–∫–∞:

```bash
sudo ./install.sh
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**

```bash
docker-compose ps
```

**–î–æ—Å—Ç—É–ø:** `https://harbor.your-domain.com`  
**–õ–æ–≥–∏–Ω:** admin/YourSecurePassword123!

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞:**
1. Projects ‚Üí NEW PROJECT
2. Project Name: `library`
3. Access Level: Public
4. OK

### 7.5 Monitoring Server (192.168.100.40)

```bash
ssh ubuntu@192.168.100.40

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –∏ Docker Compose
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo apt install -y docker-compose

# –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
mkdir -p ~/monitoring/{prometheus,grafana}
cd ~/monitoring
```

**–°–æ–∑–¥–∞–π—Ç–µ `docker-compose.yml`:**

```yaml
version: '3.8'

services:
  prometheus:
    image: prom/prometheus:latest
    container_name: prometheus
    restart: unless-stopped
    ports:
      - "9090:9090"
    volumes:
      - ./prometheus/prometheus.yml:/etc/prometheus/prometheus.yml
      - ./prometheus/alerts.yml:/etc/prometheus/alerts.yml
      - prometheus_data:/prometheus
    command:
      - '--config.file=/etc/prometheus/prometheus.yml'
      - '--storage.tsdb.path=/prometheus'
      - '--web.console.libraries=/usr/share/prometheus/console_libraries'
      - '--web.console.templates=/usr/share/prometheus/consoles'

  grafana:
    image: grafana/grafana:latest
    container_name: grafana
    restart: unless-stopped
    ports:
      - "3000:3000"
    environment:
      - GF_SECURITY_ADMIN_USER=admin
      - GF_SECURITY_ADMIN_PASSWORD=admin
      - GF_INSTALL_PLUGINS=grafana-piechart-panel
    volumes:
      - grafana_data:/var/lib/grafana

  node-exporter:
    image: prom/node-exporter:latest
    container_name: node-exporter
    restart: unless-stopped
    ports:
      - "9100:9100"
    command:
      - '--path.procfs=/host/proc'
      - '--path.sysfs=/host/sys'
      - '--collector.filesystem.mount-points-exclude=^/(sys|proc|dev|host|etc)($|/)'
    volumes:
      - /proc:/host/proc:ro
      - /sys:/host/sys:ro
      - /:/rootfs:ro

  blackbox-exporter:
    image: prom/blackbox-exporter:latest
    container_name: blackbox-exporter
    restart: unless-stopped
    ports:
      - "9115:9115"
    volumes:
      - ./blackbox/blackbox.yml:/etc/blackbox_exporter/config.yml
    command:
      - '--config.file=/etc/blackbox_exporter/config.yml'

volumes:
  prometheus_data:
  grafana_data:
```

**–°–æ–∑–¥–∞–π—Ç–µ `prometheus/prometheus.yml`:**

```yaml
global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    cluster: 'devops-pipeline'
    environment: 'production'

alerting:
  alertmanagers:
    - static_configs:
        - targets: []

rule_files:
  - "alerts.yml"

scrape_configs:
  # Prometheus itself
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  # Jenkins
  - job_name: 'jenkins'
    metrics_path: '/prometheus'
    static_configs:
      - targets: ['192.168.100.20:8080']
        labels:
          service: 'jenkins'

  # Node Exporters
  - job_name: 'node-exporter'
    static_configs:
      - targets:
          - 'node-exporter:9100'
          - '192.168.100.20:9100'  # Jenkins
        labels:
          service: 'system-metrics'

  # Blackbox HTTP probes
  - job_name: 'blackbox-http'
    metrics_path: /probe
    params:
      module: [http_2xx]
    static_configs:
      - targets:
          - http://192.168.100.20:8080  # Jenkins
          - http://192.168.100.30:9000  # SonarQube
          - http://192.168.100.31:8081  # Nexus
          - http://192.168.100.100:80   # K8s Apps
        labels:
          service: 'http-probe'
    relabel_configs:
      - source_labels: [__address__]
        target_label: __param_target
      - source_labels: [__param_target]
        target_label: instance
      - target_label: __address__
        replacement: blackbox-exporter:9115

  # Kubernetes API Server
  - job_name: 'kubernetes-apiservers'
    kubernetes_sd_configs:
      - role: endpoints
        api_server: https://192.168.100.10:6443
        tls_config:
          insecure_skip_verify: true
        bearer_token_file: /etc/prometheus/k3s-token
    scheme: https
    tls_config:
      insecure_skip_verify: true
    bearer_token_file: /etc/prometheus/k3s-token
    relabel_configs:
      - source_labels: [__meta_kubernetes_namespace, __meta_kubernetes_service_name, __meta_kubernetes_endpoint_port_name]
        action: keep
        regex: default;kubernetes;https

  # Kubernetes Nodes
  - job_name: 'kubernetes-nodes'
    kubernetes_sd_configs:
      - role: node
        api_server: https://192.168.100.10:6443
        tls_config:
          insecure_skip_verify: true
        bearer_token_file: /etc/prometheus/k3s-token
    scheme: https
    tls_config:
      insecure_skip_verify: true
    bearer_token_file: /etc/prometheus/k3s-token

  # Kubernetes Pods
  - job_name: 'kubernetes-pods'
    kubernetes_sd_configs:
      - role: pod
        api_server: https://192.168.100.10:6443
        tls_config:
          insecure_skip_verify: true
        bearer_token_file: /etc/prometheus/k3s-token
    relabel_configs:
      - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_scrape]
        action: keep
        regex: true
      - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_path]
        action: replace
        target_label: __metrics_path__
        regex: (.+)
      - source_labels: [__address__, __meta_kubernetes_pod_annotation_prometheus_io_port]
        action: replace
        regex: ([^:]+)(?::\d+)?;(\d+)
        replacement: $1:$2
        target_label: __address__
```

**–°–æ–∑–¥–∞–π—Ç–µ `prometheus/alerts.yml`:**

```yaml
groups:
  - name: application_alerts
    interval: 30s
    rules:
      - alert: ServiceDown
        expr: up{job=~"jenkins|blackbox-http"} == 0
        for: 2m
        labels:
          severity: critical
        annotations:
          summary: "Service {{ $labels.job }} is down"
          description: "{{ $labels.instance }} has been down for more than 2 minutes"

      - alert: HighMemoryUsage
        expr: (node_memory_MemTotal_bytes - node_memory_MemAvailable_bytes) / node_memory_MemTotal_bytes * 100 > 85
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "High memory usage on {{ $labels.instance }}"
          description: "Memory usage is {{ $value | humanize }}%"

      - alert: HighCPUUsage
        expr: 100 - (avg by(instance) (irate(node_cpu_seconds_total{mode="idle"}[5m])) * 100) > 80
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "High CPU usage on {{ $labels.instance }}"
          description: "CPU usage is {{ $value | humanize }}%"

      - alert: DiskSpaceLow
        expr: (node_filesystem_avail_bytes{mountpoint="/"} / node_filesystem_size_bytes{mountpoint="/"}) * 100 < 15
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "Low disk space on {{ $labels.instance }}"
          description: "Disk space is {{ $value | humanize }}%"

      - alert: PodCrashLooping
        expr: rate(kube_pod_container_status_restarts_total[15m]) > 0
        for: 5m
        labels:
          severity: critical
        annotations:
          summary: "Pod {{ $labels.pod }} is crash looping"
          description: "Pod is restarting frequently in namespace {{ $labels.namespace }}"
```

**–°–æ–∑–¥–∞–π—Ç–µ `blackbox/blackbox.yml`:**

```yaml
modules:
  http_2xx:
    prober: http
    timeout: 5s
    http:
      valid_http_versions: ["HTTP/1.1", "HTTP/2.0"]
      valid_status_codes: []
      method: GET
      no_follow_redirects: false
      fail_if_ssl: false
      fail_if_not_ssl: false
      preferred_ip_protocol: "ip4"
```

**–ü–æ–ª—É—á–µ–Ω–∏–µ K3s token –¥–ª—è Prometheus:**

```bash
# –ù–∞ k3s-master
ssh ubuntu@192.168.100.10
kubectl -n kube-system get secret $(kubectl -n kube-system get sa default -o jsonpath='{.secrets[0].name}') -o jsonpath='{.data.token}' | base64 -d

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω
```

–ù–∞ monitoring —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å —Ç–æ–∫–µ–Ω–æ–º
mkdir -p ~/monitoring/prometheus
echo "YOUR_K3S_TOKEN" > ~/monitoring/prometheus/k3s-token
```

**–ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**

```bash
cd ~/monitoring
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞
docker-compose ps
docker-compose logs -f
```

**–î–æ—Å—Ç—É–ø:**
- Prometheus: `https://grafana.your-domain.com` (–±—É–¥–µ—Ç —á–µ—Ä–µ–∑ Grafana)
- Grafana: `https://grafana.your-domain.com` (admin/admin)

---

## –≠—Ç–∞–ø 8: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Jenkins Pipeline

### 8.1 –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Jenkins

–û—Ç–∫—Ä–æ–π—Ç–µ `https://jenkins.your-domain.com`

1. –í–≤–µ–¥–∏—Ç–µ initial admin password (–∏–∑ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–Ω–µ–µ)
2. Install suggested plugins
3. Create First Admin User
4. Save and Continue

### 8.2 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤

**Manage Jenkins ‚Üí Manage Plugins ‚Üí Available**

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–ª–∞–≥–∏–Ω—ã:

- Docker Pipeline
- Kubernetes CLI
- SonarQube Scanner
- Config File Provider
- Maven Integration
- Pipeline Maven Integration
- Prometheus metrics
- Email Extension Plugin
- Blue Ocean (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ UI)

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏: **Restart Jenkins**

### 8.3 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Tools

**Manage Jenkins ‚Üí Global Tool Configuration**

**JDK:**
- Name: `jdk-17`
- ‚úì Install automatically
- Version: OpenJDK 17

**Maven:**
- Name: `maven-3`
- ‚úì Install automatically
- Version: 3.9.5

**Docker:**
- Name: `docker`
- ‚úì Install automatically
- Download from docker.com

**SonarQube Scanner:**
- Name: `sonar-scanner`
- ‚úì Install automatically
- Version: Latest

### 8.4 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Credentials

**Manage Jenkins ‚Üí Manage Credentials ‚Üí Global ‚Üí Add Credentials**

**1. GitHub Token:**
- Kind: Secret text
- Secret: `<your-github-personal-access-token>`
- ID: `github-token`
- Description: GitHub Access Token

**–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å GitHub Token:**
```
GitHub ‚Üí Settings ‚Üí Developer settings ‚Üí Personal access tokens ‚Üí Tokens (classic) ‚Üí Generate new token
Scopes: repo, admin:repo_hook
```

**2. Harbor Registry:**
- Kind: Username with password
- Username: `admin`
- Password: `<your-harbor-password>`
- ID: `harbor-creds`
- Description: Harbor Registry Credentials

**3. SonarQube Token:**
- Kind: Secret text
- Secret: `<sonarqube-token>`
- ID: `sonar-token`
- Description: SonarQube Authentication Token

**–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å SonarQube Token:**
```
SonarQube ‚Üí Administration ‚Üí Security ‚Üí Users ‚Üí Administrator ‚Üí Tokens ‚Üí Generate
```

**4. Kubernetes Config:**
- Kind: Secret file
- File: Upload `~/.kube/config`
- ID: `k8s-kubeconfig`
- Description: Kubernetes Config

**5. Gmail App Password:**
- Kind: Username with password
- Username: `your-email@gmail.com`
- Password: `<gmail-app-password>`
- ID: `gmail-creds`
- Description: Gmail Credentials

**–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å Gmail App Password:**
```
Google Account ‚Üí Security ‚Üí 2-Step Verification ‚Üí App passwords ‚Üí Jenkins
```

### 8.5 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SonarQube Server

**Manage Jenkins ‚Üí Configure System ‚Üí SonarQube servers**

- ‚úì Enable injection of SonarQube server configuration
- Name: `sonar`
- Server URL: `http://192.168.100.30:9000`
- Server authentication token: Select `sonar-token`

### 8.6 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Maven Settings

**Manage Jenkins ‚Üí Managed files ‚Üí Add a new Config ‚Üí Global Maven settings.xml**

- ID: `maven-settings`
- Name: `Maven Settings`

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:

```xml
<?xml version="1.0" encoding="UTF-8"?>
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                              http://maven.apache.org/xsd/settings-1.0.0.xsd">
  <servers>
    <server>
      <id>maven-releases</id>
      <username>admin</username>
      <password>YOUR_NEXUS_PASSWORD</password>
    </server>
    <server>
      <id>maven-snapshots</id>
      <username>admin</username>
      <password>YOUR_NEXUS_PASSWORD</password>
    </server>
  </servers>
</settings>
```

Submit

### 8.7 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Email

**Manage Jenkins ‚Üí Configure System**

**Extended E-mail Notification:**
- SMTP server: `smtp.gmail.com`
- SMTP Port: `465`
- ‚úì Use SSL
- Credentials: Select `gmail-creds`
- Default Content Type: HTML (text/html)
- Default Recipients: `your-email@example.com`

**E-mail Notification:**
- SMTP server: `smtp.gmail.com`
- ‚úì Use SMTP Authentication
- User Name: `your-email@gmail.com`
- Password: `<gmail-app-password>`
- ‚úì Use SSL
- SMTP Port: `465`
- Reply-To Address: `your-email@gmail.com`

**Test:** Send test e-mail

---

## –≠—Ç–∞–ø 9: –°–æ–∑–¥–∞–Ω–∏–µ Jenkins Pipeline

### 9.1 –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

–ù–∞ –≤–∞—à–µ–π –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ:

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç
git clone https://github.com/jaiswaladi246/Boardgame.git
cd Boardgame

# –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub
# –ó–∞—Ç–µ–º –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ origin
git remote set-url origin https://github.com/YOUR_USERNAME/boardgame.git
```

### 9.2 –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Kubernetes –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `deployment.yaml`:

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: boardgame
  namespace: default
  labels:
    app: boardgame
spec:
  replicas: 2
  selector:
    matchLabels:
      app: boardgame
  template:
    metadata:
      labels:
        app: boardgame
      annotations:
        prometheus.io/scrape: "true"
        prometheus.io/port: "8080"
        prometheus.io/path: "/actuator/prometheus"
    spec:
      containers:
      - name: boardgame
        image: harbor.your-domain.com/library/boardgame:latest
        imagePullPolicy: Always
        ports:
        - containerPort: 8080
          name: http
          protocol: TCP
        env:
        - name: SPRING_PROFILES_ACTIVE
          value: "prod"
        resources:
          requests:
            memory: "512Mi"
            cpu: "500m"
          limits:
            memory: "1Gi"
            cpu: "1000m"
        livenessProbe:
          httpGet:
            path: /
            port: 8080
          initialDelaySeconds: 60
          periodSeconds: 10
          timeoutSeconds: 5
          failureThreshold: 3
        readinessProbe:
          httpGet:
            path: /
            port: 8080
          initialDelaySeconds: 30
          periodSeconds: 5
          timeoutSeconds: 3
          failureThreshold: 3
      imagePullSecrets:
      - name: harbor-registry-secret

---
apiVersion: v1
kind: Service
metadata:
  name: boardgame-service
  namespace: default
  labels:
    app: boardgame
spec:
  type: LoadBalancer
  selector:
    app: boardgame
  ports:
  - port: 80
    targetPort: 8080
    protocol: TCP
    name: http
  sessionAffinity: ClientIP

---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: boardgame-ingress
  namespace: default
  annotations:
    traefik.ingress.kubernetes.io/router.entrypoints: web,websecure
    traefik.ingress.kubernetes.io/router.tls: "true"
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
spec:
  ingressClassName: traefik
  rules:
  - host: boardgame.apps.your-domain.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: boardgame-service
            port:
              number: 80
  tls:
  - hosts:
    - boardgame.apps.your-domain.com
    secretName: boardgame-tls
```

### 9.3 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ pom.xml

–î–æ–±–∞–≤—å—Ç–µ –≤ `pom.xml` —Å–µ–∫—Ü–∏—é `distributionManagement`:

```xml
<distributionManagement>
    <repository>
        <id>maven-releases</id>
        <name>Maven Releases Repository</name>
        <url>http://192.168.100.31:8081/repository/maven-releases/</url>
    </repository>
    <snapshotRepository>
        <id>maven-snapshots</id>
        <name>Maven Snapshots Repository</name>
        <url>http://192.168.100.31:8081/repository/maven-snapshots/</url>
    </snapshotRepository>
</distributionManagement>
```

### 9.4 –°–æ–∑–¥–∞–Ω–∏–µ Jenkinsfile

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `Jenkinsfile`:

```groovy
pipeline {
    agent any
    
    tools {
        jdk 'jdk-17'
        maven 'maven-3'
    }
    
    environment {
        SCANNER_HOME = tool 'sonar-scanner'
        HARBOR_REGISTRY = 'harbor.your-domain.com'
        HARBOR_PROJECT = 'library'
        IMAGE_NAME = 'boardgame'
        IMAGE_TAG = "${BUILD_NUMBER}"
        FULL_IMAGE_NAME = "${HARBOR_REGISTRY}/${HARBOR_PROJECT}/${IMAGE_NAME}:${IMAGE_TAG}"
        LATEST_IMAGE_NAME = "${HARBOR_REGISTRY}/${HARBOR_PROJECT}/${IMAGE_NAME}:latest"
    }
    
    stages {
        stage('Git Checkout') {
            steps {
                git branch: 'main',
                    credentialsId: 'github-token',
                    url: 'https://github.com/YOUR_USERNAME/boardgame.git'
            }
        }
        
        stage('Compile') {
            steps {
                sh 'mvn clean compile'
            }
        }
        
        stage('Unit Tests') {
            steps {
                sh 'mvn test'
            }
            post {
                always {
                    junit allowEmptyResults: true, testResults: '**/target/surefire-reports/*.xml'
                }
            }
        }
        
        stage('SonarQube Analysis') {
            steps {
                withSonarQubeEnv('sonar') {
                    sh '''
                        ${SCANNER_HOME}/bin/sonar-scanner \
                        -Dsonar.projectName=BoardGame \
                        -Dsonar.projectKey=BoardGame \
                        -Dsonar.java.binaries=target/classes
                    '''
                }
            }
        }
        
        stage('Quality Gate') {
            steps {
                timeout(time: 5, unit: 'MINUTES') {
                    waitForQualityGate abortPipeline: false, credentialsId: 'sonar-token'
                }
            }
        }
        
        stage('Trivy FS Scan') {
            steps {
                sh '''
                    trivy fs \
                    --format table \
                    --output trivy-fs-report.html \
                    --severity HIGH,CRITICAL \
                    --exit-code 0 \
                    .
                '''
            }
        }
        
        stage('Build Application') {
            steps {
                sh 'mvn clean package -DskipTests'
            }
        }
        
        stage('Publish to Nexus') {
            steps {
                configFileProvider([configFile(fileId: 'maven-settings', variable: 'MAVEN_SETTINGS')]) {
                    sh 'mvn deploy -s $MAVEN_SETTINGS -DskipTests'
                }
            }
        }
        
        stage('Build Docker Image') {
            steps {
                script {
                    sh """
                        docker build -t ${FULL_IMAGE_NAME} .
                        docker tag ${FULL_IMAGE_NAME} ${LATEST_IMAGE_NAME}
                    """
                }
            }
        }
        
        stage('Trivy Image Scan') {
            steps {
                sh """
                    trivy image \
                    --format table \
                    --output trivy-image-report.html \
                    --severity HIGH,CRITICAL \
                    --exit-code 0 \
                    ${FULL_IMAGE_NAME}
                """
            }
        }
        
        stage('Push to Harbor') {
            steps {
                script {
                    docker.withRegistry("https://${HARBOR_REGISTRY}", 'harbor-creds') {
                        sh """
                            docker push ${FULL_IMAGE_NAME}
                            docker push ${LATEST_IMAGE_NAME}
                        """
                    }
                }
            }
        }
        
        stage('Update Deployment Manifest') {
            steps {
                script {
                    sh """
                        sed -i 's|image:.*|image: ${FULL_IMAGE_NAME}|g' deployment.yaml
                    """
                }
            }
        }
        
        stage('Deploy to Kubernetes') {
            steps {
                script {
                    withKubeConfig([credentialsId: 'k8s-kubeconfig']) {
                        sh '''
                            # –°–æ–∑–¥–∞–Ω–∏–µ Harbor registry secret (–µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
                            kubectl create secret docker-registry harbor-registry-secret \
                              --docker-server=${HARBOR_REGISTRY} \
                              --docker-username=admin \
                              --docker-password=YOUR_HARBOR_PASSWORD \
                              --namespace=default \
                              --dry-run=client -o yaml | kubectl apply -f -
                            
                            # –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ deployment
                            kubectl apply -f deployment.yaml
                            
                            # –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è rollout
                            kubectl rollout status deployment/boardgame -n default --timeout=5m
                        '''
                    }
                }
            }
        }
        
        stage('Verify Deployment') {
            steps {
                script {
                    withKubeConfig([credentialsId: 'k8s-kubeconfig']) {
                        sh '''
                            echo "=== Pods Status ==="
                            kubectl get pods -n default -l app=boardgame
                            
                            echo "=== Service Status ==="
                            kubectl get svc boardgame-service -n default
                            
                            echo "=== Ingress Status ==="
                            kubectl get ingress boardgame-ingress -n default
                            
                            echo "=== Recent Events ==="
                            kubectl get events -n default --sort-by='.lastTimestamp' | tail -10
                        '''
                    }
                }
            }
        }
    }
    
    post {
        always {
            // –ê—Ä—Ö–∏–≤–∞—Ü–∏—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
            archiveArtifacts artifacts: '**/target/*.jar', allowEmptyArchive: true
            archiveArtifacts artifacts: 'trivy-*-report.html', allowEmptyArchive: true
            
            // –û—á–∏—Å—Ç–∫–∞ workspace
            cleanWs()
        }
        
        success {
            emailext(
                subject: "‚úÖ Pipeline Success: ${env.JOB_NAME} #${env.BUILD_NUMBER}",
                body: """
                    <html>
                    <body style="font-family: Arial, sans-serif;">
                        <h2 style="color: #28a745;">üéâ Pipeline Executed Successfully!</h2>
                        <table style="border-collapse: collapse; width: 100%;">
                            <tr>
                                <td style="padding: 8px; border: 1px solid #ddd;"><strong>Job:</strong></td>
                                <td style="padding: 8px; border: 1px solid #ddd;">${env.JOB_NAME}</td>
                            </tr>
                            <tr>
                                <td style="padding: 8px; border: 1px solid #ddd;"><strong>Build Number:</strong></td>
                                <td style="padding: 8px; border: 1px solid #ddd;">${env.BUILD_NUMBER}</td>
                            </tr>
                            <tr>
                                <td style="padding: 8px; border: 1px solid #ddd;"><strong>Docker Image:</strong></td>
                                <td style="padding: 8px; border: 1px solid #ddd;">${FULL_IMAGE_NAME}</td>
                            </tr>
                            <tr>
                                <td style="padding: 8px; border: 1px solid #ddd;"><strong>Application URL:</strong></td>
                                <td style="padding: 8px; border: 1px solid #ddd;">
                                    <a href="https://boardgame.apps.your-domain.com">https://boardgame.apps.your-domain.com</a>
                                </td>
                            </tr>
                            <tr>
                                <td style="padding: 8px; border: 1px solid #ddd;"><strong>Build URL:</strong></td>
                                <td style="padding: 8px; border: 1px solid #ddd;">
                                    <a href="${env.BUILD_URL}">${env.BUILD_URL}</a>
                                </td>
                            </tr>
                        </table>
                        <p style="margin-top: 20px;">Check the attached Trivy security report for details.</p>
                    </body>
                    </html>
                """,
                to: 'your-email@example.com',
                mimeType: 'text/html',
                attachmentsPattern: 'trivy-image-report.html'
            )
        }
        
        failure {
            emailext(
                subject: "‚ùå Pipeline Failed: ${env.JOB_NAME} #${env.BUILD_NUMBER}",
                body: """
                    <html>
                    <body style="font-family: Arial, sans-serif;">
                        <h2 style="color: #dc3545;">‚ùå Pipeline Execution Failed!</h2>
                        <table style="border-collapse: collapse; width: 100%;">
                            <tr>
                                <td style="padding: 8px; border: 1px solid #ddd;"><strong>Job:</strong></td>
                                <td style="padding: 8px; border: 1px solid #ddd;">${env.JOB_NAME}</td>
                            </tr>
                            <tr>
                                <td style="padding: 8px; border: 1px solid #ddd;"><strong>Build Number:</strong></td>
                                <td style="padding: 8px; border: 1px solid #ddd;">${env.BUILD_NUMBER}</td>
                            </tr>
                            <tr>
                                <td style="padding: 8px; border: 1px solid #ddd;"><strong>Failed Stage:</strong></td>
                                <td style="padding: 8px; border: 1px solid #ddd;">${env.STAGE_NAME}</td>
                            </tr>
                            <tr>
                                <td style="padding: 8px; border: 1px solid #ddd;"><strong>Console Output:</strong></td>
                                <td style="padding: 8px; border: 1px solid #ddd;">
                                    <a href="${env.BUILD_URL}console">${env.BUILD_URL}console</a>
                                </td>
                            </tr>
                        </table>
                        <p style="margin-top: 20px; color: #dc3545;">Please check the console output for detailed error information.</p>
                    </body>
                    </html>
                """,
                to: 'your-email@example.com',
                mimeType: 'text/html'
            )
        }
    }
}
```

### 9.5 –ö–æ–º–º–∏—Ç –∏ –ø—É—à –∏–∑–º–µ–Ω–µ–Ω–∏–π

```bash
git add .
git commit -m "Add CI/CD pipeline configuration"
git push origin main
```

---

## –≠—Ç–∞–ø 10: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –Ω–∞ Jenkins

### 10.1 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node Exporter –Ω–∞ Jenkins

```bash
ssh ubuntu@192.168.100.20

# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ Node Exporter
cd /tmp
wget https://github.com/prometheus/node_exporter/releases/download/v1.7.0/node_exporter-1.7.0.linux-amd64.tar.gz
tar xvfz node_exporter-1.7.0.linux-amd64.tar.gz
sudo cp node_exporter-1.7.0.linux-amd64/node_exporter /usr/local/bin/

# –°–æ–∑–¥–∞–Ω–∏–µ systemd service
sudo tee /etc/systemd/system/node-exporter.service > /dev/null <<EOF
[Unit]
Description=Node Exporter
After=network.target

[Service]
Type=simple
User=ubuntu
ExecStart=/usr/local/bin/node_exporter
Restart=always
RestartSec=3

[Install]
WantedBy=multi-user.target
EOF

# –ó–∞–ø—É—Å–∫
sudo systemctl daemon-reload
sudo systemctl start node-exporter
sudo systemctl enable node-exporter
sudo systemctl status node-exporter
```

–ü—Ä–æ–≤–µ—Ä–∫–∞:

```bash
curl http://localhost:9100/metrics
```

### 10.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Jenkins Prometheus Plugin

–í Jenkins:

**Manage Jenkins ‚Üí Configure System ‚Üí Prometheus**

- Path: `/prometheus`
- Collecting metrics period: `120` seconds
- ‚úì Count successful builds
- ‚úì Count unstable builds  
- ‚úì Count failed builds
- ‚úì Count not built builds
- ‚úì Count aborted builds

**Save**

–ü—Ä–æ–≤–µ—Ä–∫–∞:

```bash
curl http://192.168.100.20:8080/prometheus
```

### 10.3 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Grafana –¥–∞—à–±–æ—Ä–¥–æ–≤

–û—Ç–∫—Ä–æ–π—Ç–µ Grafana: `https://grafana.your-domain.com` (admin/admin)

**–î–æ–±–∞–≤–ª–µ–Ω–∏–µ Prometheus Data Source:**

1. Configuration (‚öôÔ∏è) ‚Üí Data Sources ‚Üí Add data source
2. Select: Prometheus
3. URL: `http://prometheus:9090`
4. Save & Test

**–ò–º–ø–æ—Ä—Ç –¥–∞—à–±–æ—Ä–¥–æ–≤:**

**–î–∞—à–±–æ—Ä–¥ #1: Node Exporter Full**
1. Dashboards ‚Üí Import
2. Import via grafana.com: `1860`
3. Load
4. Select Prometheus data source
5. Import

**–î–∞—à–±–æ—Ä–¥ #2: Jenkins Performance**
1. Dashboards ‚Üí Import
2. Import via grafana.com: `9964`
3. Load
4. Select Prometheus data source
5. Import

**–î–∞—à–±–æ—Ä–¥ #3: Blackbox Exporter**
1. Dashboards ‚Üí Import
2. Import via grafana.com: `7587`
3. Load
4. Select Prometheus data source
5. Import

**–î–∞—à–±–æ—Ä–¥ #4: Kubernetes Cluster Monitoring**
1. Dashboards ‚Üí Import
2. Import via grafana.com: `315`
3. Load
4. Select Prometheus data source
5. Import

---

## –≠—Ç–∞–ø 11: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ K8s

### 11.1 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Kubeaudit

–ù–∞ k3s-master:

```bash
ssh ubuntu@192.168.100.10

# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ
wget https://github.com/Shopify/kubeaudit/releases/download/v0.22.0/kubeaudit_0.22.0_linux_amd64.tar.gz
tar -xzf kubeaudit_0.22.0_linux_amd64.tar.gz
sudo mv kubeaudit /usr/local/bin/
sudo chmod +x /usr/local/bin/kubeaudit

# –ó–∞–ø—É—Å–∫ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
kubeaudit all > kubeaudit-report.txt

# –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á–µ—Ç–∞
cat kubeaudit-report.txt
```

### 11.2 –°–æ–∑–¥–∞–Ω–∏–µ RBAC –¥–ª—è Jenkins

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `jenkins-rbac.yaml`:

```yaml
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: jenkins
  namespace: default

---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: jenkins-deployer
  namespace: default
rules:
- apiGroups: ["", "apps", "networking.k8s.io"]
  resources:
    - pods
    - pods/log
    - services
    - deployments
    - replicasets
    - ingresses
    - secrets
    - configmaps
  verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
- apiGroups: [""]
  resources:
    - pods/exec
  verbs: ["create"]

---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: jenkins-deployer-binding
  namespace: default
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: jenkins-deployer
subjects:
- kind: ServiceAccount
  name: jenkins
  namespace: default

---
apiVersion: v1
kind: Secret
metadata:
  name: jenkins-token
  namespace: default
  annotations:
    kubernetes.io/service-account.name: jenkins
type: kubernetes.io/service-account-token
```

–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:

```bash
kubectl apply -f jenkins-rbac.yaml

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
kubectl get secret jenkins-token -n default -o jsonpath='{.data.token}' | base64 -d

# –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω!
```

### 11.3 –°–æ–∑–¥–∞–Ω–∏–µ kubeconfig –¥–ª—è Jenkins

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `create-jenkins-kubeconfig.sh`:

```bash
#!/bin/bash

SERVICE_ACCOUNT=jenkins
NAMESPACE=default
SERVER_URL=https://192.168.100.10:6443

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
TOKEN=$(kubectl get secret jenkins-token -n ${NAMESPACE} -o jsonpath='{.data.token}' | base64 -d)

# –ü–æ–ª—É—á–µ–Ω–∏–µ CA certificate
kubectl get secret jenkins-token -n ${NAMESPACE} -o jsonpath='{.data.ca\.crt}' | base64 -d > ca.crt

# –°–æ–∑–¥–∞–Ω–∏–µ kubeconfig
cat > jenkins-kubeconfig.yaml <<EOF
apiVersion: v1
kind: Config
clusters:
- name: k3s-cluster
  cluster:
    certificate-authority-data: $(kubectl get secret jenkins-token -n ${NAMESPACE} -o jsonpath='{.data.ca\.crt}')
    server: ${SERVER_URL}
contexts:
- name: jenkins-context
  context:
    cluster: k3s-cluster
    namespace: ${NAMESPACE}
    user: jenkins
current-context: jenkins-context
users:
- name: jenkins
  user:
    token: ${TOKEN}
EOF

echo "Kubeconfig created: jenkins-kubeconfig.yaml"
```

–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:

```bash
chmod +x create-jenkins-kubeconfig.sh
./create-jenkins-kubeconfig.sh

# –û–±–Ω–æ–≤–∏—Ç–µ credentials –≤ Jenkins —ç—Ç–∏–º —Ñ–∞–π–ª–æ–º
```

### 11.4 Network Policies (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `network-policies.yaml`:

```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: boardgame-network-policy
  namespace: default
spec:
  podSelector:
    matchLabels:
      app: boardgame
  policyTypes:
  - Ingress
  - Egress
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          name: traefik
    - podSelector: {}
    ports:
    - protocol: TCP
      port: 8080
  egress:
  - to:
    - namespaceSelector: {}
    ports:
    - protocol: TCP
      port: 53  # DNS
    - protocol: UDP
      port: 53  # DNS
  - to:
    - podSelector: {}
```

---

## –≠—Ç–∞–ø 12: –ó–∞–ø—É—Å–∫ Pipeline

### 12.1 –°–æ–∑–¥–∞–Ω–∏–µ Pipeline Job –≤ Jenkins

1. Jenkins ‚Üí New Item
2. Item name: `boardgame-pipeline`
3. Type: **Pipeline**
4. OK

**General:**
- ‚úì GitHub project
  - Project url: `https://github.com/YOUR_USERNAME/boardgame/`
- ‚úì Discard old builds
  - Max # of builds to keep: `10`

**Build Triggers:**
- ‚úì GitHub hook trigger for GITScm polling

**Pipeline:**
- Definition: **Pipeline script from SCM**
  - SCM: Git
  - Repository URL: `https://github.com/YOUR_USERNAME/boardgame.git`
  - Credentials: `github-token`
  - Branch Specifier: `*/main`
  - Script Path: `Jenkinsfile`

**Save**

### 12.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Webhook (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–í –≤–∞—à–µ–º GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:

1. Settings ‚Üí Webhooks ‚Üí Add webhook
2. Payload URL: `https://jenkins.your-domain.com/github-webhook/`
3. Content type: `application/json`
4. Which events: **Just the push event**
5. ‚úì Active
6. Add webhook

### 12.3 –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ Pipeline

–í Jenkins:

1. –û—Ç–∫—Ä–æ–π—Ç–µ `boardgame-pipeline`
2. **Build Now**
3. –°–º–æ—Ç—Ä–∏—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ Console Output

**‚è±Ô∏è –û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è: 10-15 –º–∏–Ω—É—Ç**

### 12.4 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**Console Output:**
```
Started by user admin
Running in Durability level: MAX_SURVIVABILITY
[Pipeline] Start of Pipeline
[Pipeline] node
Running on Jenkins in /var/lib/jenkins/workspace/boardgame-pipeline
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Git Checkout)
...
```

**Blue Ocean View (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
- Jenkins ‚Üí Open Blue Ocean
- –ö—Ä–∞—Å–∏–≤—ã–π UI –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ pipeline

---

## –≠—Ç–∞–ø 13: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### 13.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ Kubernetes Deployment

```bash
# Pods
kubectl get pods -n default -l app=boardgame

# –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:
# NAME                        READY   STATUS    RESTARTS   AGE
# boardgame-xxxxxxxxx-xxxxx   1/1     Running   0          5m
# boardgame-xxxxxxxxx-xxxxx   1/1     Running   0          5m

# Services
kubectl get svc boardgame-service -n default

# Ingress
kubectl get ingress boardgame-ingress -n default

# Logs
kubectl logs -f deployment/boardgame -n default

# Events
kubectl get events -n default --sort-by='.lastTimestamp' | tail -20
```

### 13.2 –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é

**–ß–µ—Ä–µ–∑ Ingress (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
```
https://boardgame.apps.your-domain.com
```

**–ß–µ—Ä–µ–∑ LoadBalancer IP (–≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–µ—Ç—å):**
```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ LoadBalancer IP
LB_IP=$(kubectl get svc boardgame-service -n default -o jsonpath='{.status.loadBalancer.ingress[0].ip}')
echo "Application URL: http://${LB_IP}"

# –ü—Ä–∏–º–µ—Ä: http://192.168.100.100
```

**–ß–µ—Ä–µ–∑ Port Forward (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è):**
```bash
kubectl port-forward svc/boardgame-service 8080:80 -n default

# –î–æ—Å—Ç—É–ø: http://localhost:8080
```

### 13.3 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:**

| Username | Password | Role |
|----------|----------|------|
| bugs | bunny | USER |
| daffy | duck | MANAGER |

**–§—É–Ω–∫—Ü–∏–∏:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–≥—Ä (–≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä (–≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–æ–≤ (–≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–æ–≤ (—Ç–æ–ª—å–∫–æ MANAGER)

**–¢–µ—Å—Ç-–∫–µ–π—Å—ã:**

1. **–í—Ö–æ–¥ –∫–∞–∫ USER:**
   ```
   Username: bugs
   Password: bunny
   ```
   - ‚úì –ú–æ–∂–Ω–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏–≥—Ä—ã
   - ‚úì –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä—É
   - ‚úì –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤
   - ‚úó –ù–µ–ª—å–∑—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å/—É–¥–∞–ª—è—Ç—å –æ—Ç–∑—ã–≤—ã

2. **–í—Ö–æ–¥ –∫–∞–∫ MANAGER:**
   ```
   Username: daffy
   Password: duck
   ```
   - ‚úì –ú–æ–∂–Ω–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏–≥—Ä—ã
   - ‚úì –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä—É
   - ‚úì –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤
   - ‚úì –ú–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å/—É–¥–∞–ª—è—Ç—å –æ—Ç–∑—ã–≤—ã

### 13.4 –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤

**Jenkins:**
- Build Artifacts: `target/*.jar`
- Trivy Reports: `trivy-fs-report.html`, `trivy-image-report.html`

**Nexus:** `https://nexus.your-domain.com`
- Browse ‚Üí maven-releases
- com/devops/boardgame/{VERSION}/boardgame-{VERSION}.jar

**Harbor:** `https://harbor.your-domain.com`
- Projects ‚Üí library ‚Üí Repositories ‚Üí boardgame
- Tags: `latest`, `{BUILD_NUMBER}`

**SonarQube:** `https://sonar.your-domain.com`
- Projects ‚Üí BoardGame
- Code Quality metrics, bugs, vulnerabilities

### 13.5 –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

**Grafana:** `https://grafana.your-domain.com`

**–î–∞—à–±–æ—Ä–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**

1. **Node Exporter Full:**
   - CPU Usage
   - Memory Usage
   - Disk I/O
   - Network Traffic

2. **Jenkins Performance:**
   - Build Duration
   - Build Success Rate
   - Queue Length
   - Executor Usage

3. **Blackbox Exporter:**
   - HTTP Response Time
   - HTTP Status Codes
   - SSL Certificate Expiry

4. **Kubernetes Cluster:**
   - Pod Status
   - Resource Usage
   - Network I/O

### 13.6 –ü—Ä–æ–≤–µ—Ä–∫–∞ Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—à email:

- ‚úÖ Success notification (—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–Ω—ã–º Trivy report)
- –°–æ–¥–µ—Ä–∂–∏—Ç: Job name, Build number, Docker image, Application URL

–î–ª—è —Ç–µ—Å—Ç–∞ failure notification:
```bash
# –ù–∞–º–µ—Ä–µ–Ω–Ω–æ —Å–æ–∑–¥–∞–π—Ç–µ –æ—à–∏–±–∫—É –≤ Jenkinsfile
# –ù–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
# –ò –∑–∞–ø—É—Å—Ç–∏—Ç–µ build
```

---

## –≠—Ç–∞–ø 14: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ Best Practices

### 14.1 Horizontal Pod Autoscaler (HPA)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `hpa.yaml`:

```yaml
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: boardgame-hpa
  namespace: default
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: boardgame
  minReplicas: 2
  maxReplicas: 10
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 70
  - type: Resource
    resource:
      name: memory
      target:
        type: Utilization
        averageUtilization: 80
  behavior:
    scaleDown:
      stabilizationWindowSeconds: 300
      policies:
      - type: Percent
        value: 50
        periodSeconds: 15
    scaleUp:
      stabilizationWindowSeconds: 0
      policies:
      - type: Percent
        value: 100
        periodSeconds: 15
      - type: Pods
        value: 4
        periodSeconds: 15
      selectPolicy: Max
```

–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:

```bash
kubectl apply -f hpa.yaml

# –ü—Ä–æ–≤–µ—Ä–∫–∞
kubectl get hpa -n default
```

### 14.2 Persistent Volumes –¥–ª—è –¥–∞–Ω–Ω—ã—Ö

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `pv-pvc.yaml`:

```yaml
apiVersion: v1
kind: PersistentVolume
metadata:
  name: boardgame-pv
spec:
  capacity:
    storage: 10Gi
  accessModes:
    - ReadWriteMany
  persistentVolumeReclaimPolicy: Retain
  storageClassName: manual
  hostPath:
    path: /mnt/data/boardgame
    type: DirectoryOrCreate

---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: boardgame-pvc
  namespace: default
spec:
  accessModes:
    - ReadWriteMany
  resources:
    requests:
      storage: 10Gi
  storageClassName: manual
```

### 14.3 ConfigMap –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `configmap.yaml`:

```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: boardgame-config
  namespace: default
data:
  application.properties: |
    server.port=8080
    spring.application.name=boardgame
    spring.profiles.active=prod
    logging.level.root=INFO
    logging.level.com.devops.boardgame=DEBUG
```

### 14.4 Resource Quotas –¥–ª—è namespace

```yaml
apiVersion: v1
kind: ResourceQuota
metadata:
  name: default-quota
  namespace: default
spec:
  hard:
    requests.cpu: "10"
    requests.memory: 20Gi
    limits.cpu: "20"
    limits.memory: 40Gi
    persistentvolumeclaims: "10"
    services.loadbalancers: "5"
```

### 14.5 Pod Disruption Budget

```yaml
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: boardgame-pdb
  namespace: default
spec:
  minAvailable: 1
  selector:
    matchLabels:
      app: boardgame
```

---

## –≠—Ç–∞–ø 15: Troubleshooting

### 15.1 –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

#### –ü—Ä–æ–±–ª–µ–º–∞: Jenkins –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ K8s

**–°–∏–º–ø—Ç–æ–º—ã:**
```
ERROR: Unable to connect to the server: dial tcp 192.168.100.10:6443: i/o timeout
```

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ù–∞ Jenkins —Å–µ—Ä–≤–µ—Ä–µ
kubectl cluster-info

# –ü—Ä–æ–≤–µ—Ä–∫–∞ connectivity
telnet 192.168.100.10 6443

# –ü—Ä–æ–≤–µ—Ä–∫–∞ kubeconfig
cat ~/.kube/config

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ kubeconfig
scp ubuntu@192.168.100.10:/etc/rancher/k3s/k3s.yaml ~/.kube/config
sed -i 's/127.0.0.1/192.168.100.10/' ~/.kube/config
```

#### –ü—Ä–æ–±–ª–µ–º–∞: Harbor "x509: certificate signed by unknown authority"

**–°–∏–º–ø—Ç–æ–º—ã:**
```
Error response from daemon: Get "https://harbor.your-domain.com/v2/": x509: certificate signed by unknown authority
```

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ù–∞ Jenkins –∏ –≤—Å–µ—Ö K8s nodes
sudo mkdir -p /etc/docker/certs.d/harbor.your-domain.com

# –ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ insecure registries
sudo tee /etc/docker/daemon.json > /dev/null <<EOF
{
  "insecure-registries": ["harbor.your-domain.com", "192.168.100.32"]
}
EOF

sudo systemctl restart docker
```

#### –ü—Ä–æ–±–ª–µ–º–∞: Pod –Ω–µ –º–æ–∂–µ—Ç —Å–∫–∞—á–∞—Ç—å –æ–±—Ä–∞–∑ –∏–∑ Harbor

**–°–∏–º–ø—Ç–æ–º—ã:**
```
Failed to pull image "harbor.your-domain.com/library/boardgame:latest": rpc error: code = Unknown desc = failed to pull and unpack image
```

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –°–æ–∑–¥–∞–π—Ç–µ/–æ–±–Ω–æ–≤–∏—Ç–µ docker-registry secret
kubectl delete secret harbor-registry-secret -n default --ignore-not-found

kubectl create secret docker-registry harbor-registry-secret \
  --docker-server=harbor.your-domain.com \
  --docker-username=admin \
  --docker-password=YOUR_HARBOR_PASSWORD \
  --namespace=default

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ
kubectl get secret harbor-registry-secret -n default -o yaml
```

#### –ü—Ä–æ–±–ª–µ–º–∞: MetalLB –Ω–µ –≤—ã–¥–∞–µ—Ç IP –∞–¥—Ä–µ—Å–∞

**–°–∏–º–ø—Ç–æ–º—ã:**
```
NAME                  TYPE           EXTERNAL-IP   PORT(S)
boardgame-service     LoadBalancer   <pending>     80:30123/TCP
```

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ MetalLB pods
kubectl get pods -n metallb-system

# –ü—Ä–æ–≤–µ—Ä–∫–∞ logs
kubectl logs -n metallb-system -l app=metallb

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
kubectl get ipaddresspools -n metallb-system -o yaml
kubectl get l2advertisements -n metallb-system -o yaml

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
kubectl delete ipaddresspool default-pool -n metallb-system
kubectl delete l2advertisement default -n metallb-system
kubectl apply -f metallb-config.yaml

# –†–µ—Å—Ç–∞—Ä—Ç MetalLB
kubectl rollout restart deployment controller -n metallb-system
```

#### –ü—Ä–æ–±–ª–µ–º–∞: Traefik Ingress –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–°–∏–º–ø—Ç–æ–º—ã:**
```
curl: (7) Failed to connect to boardgame.apps.your-domain.com port 443: Connection refused
```

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Traefik
kubectl get svc -n traefik
kubectl get pods -n traefik
kubectl logs -n traefik -l app.kubernetes.io/name=traefik

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Ingress
kubectl describe ingress boardgame-ingress -n default

# –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS
nslookup boardgame.apps.your-domain.com

# –¢–µ—Å—Ç –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ LoadBalancer IP
LB_IP=$(kubectl get svc traefik -n traefik -o jsonpath='{.status.loadBalancer.ingress[0].ip}')
curl -H "Host: boardgame.apps.your-domain.com" http://${LB_IP}
```

#### –ü—Ä–æ–±–ª–µ–º–∞: SonarQube Quality Gate timeout

**–°–∏–º–ø—Ç–æ–º—ã:**
```
WARN: QUALITY GATE STATUS: NONE - Failed to get Quality Gate status
```

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –í SonarQube —Å–æ–∑–¥–∞–π—Ç–µ webhook
# Administration ‚Üí Configuration ‚Üí Webhooks ‚Üí Create

# Name: Jenkins
# URL: http://192.168.100.20:8080/sonarqube-webhook/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook
# –í SonarQube –ø–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞: Administration ‚Üí Webhooks ‚Üí Deliveries
```

#### –ü—Ä–æ–±–ª–µ–º–∞: –í—ã—Å–æ–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ VM
- OOM (Out of Memory) errors

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ –Ω–∞ VM
htop
free -h
df -h

# –í Kubernetes
kubectl top nodes
kubectl top pods -A

# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:
# 1. –£–º–µ–Ω—å—à–∏—Ç–µ replicas
kubectl scale deployment boardgame --replicas=1 -n default

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ resource limits
kubectl set resources deployment boardgame \
  --limits=cpu=500m,memory=512Mi \
  --requests=cpu=250m,memory=256Mi \
  -n default

# 3. –û—á–∏—Å—Ç–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –æ–±—Ä–∞–∑–æ–≤
docker system prune -a -f
```

### 15.2 –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

**Kubernetes:**

```bash
# –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∞—Å—Ç–µ—Ä–µ
kubectl cluster-info
kubectl get nodes -o wide
kubectl get all -A

# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ–¥–æ–≤
kubectl get pods -n default -o wide
kubectl describe pod <pod-name> -n default
kubectl logs <pod-name> -n default
kubectl logs <pod-name> -n default --previous  # –õ–æ–≥–∏ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ crashed –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø–æ–¥—É
kubectl exec -it <pod-name> -n default -- /bin/bash

# –°–æ–±—ã—Ç–∏—è
kubectl get events -n default --sort-by='.lastTimestamp'
kubectl get events -A --sort-by='.lastTimestamp' | tail -50

# –†–µ—Å—É—Ä—Å—ã
kubectl top nodes
kubectl top pods -A

# –°–µ—Ç–µ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
kubectl get svc -A
kubectl get ingress -A
kubectl get endpoints -n default

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
kubectl get configmap -n default
kubectl get secret -n default

# –°—Ç–∞—Ç—É—Å rollout
kubectl rollout status deployment/boardgame -n default
kubectl rollout history deployment/boardgame -n default

# –û—Ç–∫–∞—Ç deployment
kubectl rollout undo deployment/boardgame -n default

# –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
kubectl scale deployment boardgame --replicas=3 -n default

# –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞—Å—Ç—Ä—è–≤—à–∏—Ö –ø–æ–¥–æ–≤
kubectl delete pod <pod-name> -n default --force --grace-period=0
```

**Docker:**

```bash
# –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker ps -a

# –õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker logs <container-name> -f

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
docker stats

# –û—á–∏—Å—Ç–∫–∞
docker system df
docker system prune -a -f

# –û–±—Ä–∞–∑—ã
docker images
docker rmi <image-id>

# –°–µ—Ç–∏
docker network ls
docker network inspect bridge
```

**–°–∏—Å—Ç–µ–º–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**

```bash
# CPU –∏ Memory
htop
free -h
vmstat 1

# Disk
df -h
du -sh /*
iostat -x 1

# Network
netstat -tulpn
ss -tulpn
iftop

# –ü—Ä–æ—Ü–µ—Å—Å—ã
ps aux | grep java
ps aux | grep docker

# –õ–æ–≥–∏
journalctl -u k3s -f
journalctl -u jenkins -f
journalctl -u docker -f
```

**Prometheus Queries (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏):**

```promql
# CPU Usage
100 - (avg by(instance) (irate(node_cpu_seconds_total{mode="idle"}[5m])) * 100)

# Memory Usage
(node_memory_MemTotal_bytes - node_memory_MemAvailable_bytes) / node_memory_MemTotal_bytes * 100

# Disk Usage
(node_filesystem_size_bytes{mountpoint="/"} - node_filesystem_free_bytes{mountpoint="/"}) / node_filesystem_size_bytes{mountpoint="/"} * 100

# HTTP Response Time
probe_duration_seconds{job="blackbox-http"}

# Pod Restarts
rate(kube_pod_container_status_restarts_total[15m])
```

---

## –≠—Ç–∞–ø 16: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### 16.1 –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

**–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- [ ] Proxmox —Å–µ—Ç—å vmbr1 (192.168.100.0/24) —Å–æ–∑–¥–∞–Ω–∞
- [ ] –í—Å–µ 8 VM —Å–æ–∑–¥–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] SSH –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º VM –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –ò–Ω—Ç–µ—Ä–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö VM

**Kubernetes:**
- [ ] K3s master node —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] 2 worker nodes –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∏ Ready
- [ ] kubectl —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –≤–∞—à–µ–π –º–∞—à–∏–Ω—ã
- [ ] MetalLB —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –≤—ã–¥–∞–µ—Ç IP
- [ ] Traefik Ingress —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] kubeaudit —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ

**CI/CD –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
- [ ] Jenkins –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ Cloudflare Tunnel
- [ ] SonarQube —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
- [ ] Nexus —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Å–æ–∑–¥–∞–Ω—ã
- [ ] Harbor —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω
- [ ] Jenkins plugins —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] Jenkins credentials –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] Jenkins tools —Å–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω—ã

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
- [ ] Prometheus —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏
- [ ] Grafana –¥–æ—Å—Ç—É–ø–Ω–∞
- [ ] –í—Å–µ 4 –¥–∞—à–±–æ—Ä–¥–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã
- [ ] Blackbox exporter –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- [ ] Node exporter —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Jenkins
- [ ] Jenkins Prometheus plugin –Ω–∞—Å—Ç—Ä–æ–µ–Ω

**Pipeline:**
- [ ] GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–∑–¥–∞–Ω (–ø—Ä–∏–≤–∞—Ç–Ω—ã–π)
- [ ] Jenkinsfile –∏ deployment.yaml –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [ ] Pipeline job —Å–æ–∑–¥–∞–Ω –≤ Jenkins
- [ ] GitHub webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] Pipeline —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–∏–ª—Å—è
- [ ] Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ –≤ K8s
- [ ] Pods –≤ —Å—Ç–∞—Ç—É—Å–µ Running
- [ ] Service —Å–æ–∑–¥–∞–Ω —Å LoadBalancer IP
- [ ] Ingress –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ URL
- [ ] –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- [ ] RBAC –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è Jenkins
- [ ] Network policies –ø—Ä–∏–º–µ–Ω–µ–Ω—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] Harbor registry secret —Å–æ–∑–¥–∞–Ω
- [ ] Trivy —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] SonarQube Quality Gate –Ω–∞—Å—Ç—Ä–æ–µ–Ω

**–í–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø:**
- [ ] Cloudflare Tunnel —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] DNS –∑–∞–ø–∏—Å–∏ —Å–æ–∑–¥–∞–Ω—ã
- [ ] HTTPS —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- [ ] Wildcard –¥–ª—è *.apps.your-domain.com –Ω–∞—Å—Ç—Ä–æ–µ–Ω

### 16.2 –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π End-to-End

**1. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–¥–∞:**

```bash
# –ù–∞ –≤–∞—à–µ–π –º–∞—à–∏–Ω–µ
cd boardgame
echo "<!-- Test change -->" >> src/main/webapp/index.jsp
git add .
git commit -m "Test CI/CD pipeline"
git push
```

**2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ (–µ—Å–ª–∏ webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω):**
- Jenkins –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç pipeline
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Jenkins UI

**3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
```bash
# –°–º–æ—Ç—Ä–∏—Ç–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
# Jenkins ‚Üí boardgame-pipeline ‚Üí Build #X ‚Üí Console Output

# –ò–ª–∏ —á–µ—Ä–µ–∑ Blue Ocean
# Jenkins ‚Üí Open Blue Ocean ‚Üí boardgame-pipeline
```

**4. –ü—Ä–æ–≤–µ—Ä–∫–∞ deployment:**
```bash
kubectl get pods -n default -l app=boardgame
kubectl rollout status deployment/boardgame -n default
```

**5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
https://boardgame.apps.your-domain.com

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
```

**6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤:**
- Nexus: –Ω–æ–≤—ã–π JAR —Ñ–∞–π–ª
- Harbor: –Ω–æ–≤—ã–π Docker image —Å —Ç–µ–≥–æ–º
- SonarQube: –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑

**7. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**
- Grafana: –º–µ—Ç—Ä–∏–∫–∏ –æ–±–Ω–æ–≤–∏–ª–∏—Å—å
- Prometheus: –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

**8. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:**
- Email: –ø–æ–ª—É—á–µ–Ω–æ Success notification
- –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω Trivy report

### 16.3 –§–∏–Ω–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         Internet                             ‚îÇ
‚îÇ                            ‚Üì                                 ‚îÇ
‚îÇ                  Cloudflare Tunnel                          ‚îÇ
‚îÇ          (TLS Termination, DDoS Protection)                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Proxmox Host (10.0.10.200)                     ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ         vmbr1 Network (192.168.100.0/24)           ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                                                      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ         CI/CD Infrastructure                ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ                                              ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ Jenkins  ‚îÇ  ‚îÇSonarQube ‚îÇ  ‚îÇ  Nexus   ‚îÇ ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ   :20    ‚îÇ  ‚îÇ   :30    ‚îÇ  ‚îÇ   :31    ‚îÇ ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ                                              ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  Harbor  ‚îÇ  ‚îÇ     Monitoring       ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ   :32    ‚îÇ  ‚îÇ Prometheus + Grafana ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ        :40           ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                                                      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ       K3s Kubernetes Cluster                ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ                                              ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  Master Node (192.168.100.10)      ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  - K3s Control Plane               ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  - API Server                      ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  - etcd (SQLite)                   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ                                              ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  Worker Node 1 ‚îÇ  ‚îÇ  Worker Node 2 ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  (.11)         ‚îÇ  ‚îÇ  (.12)         ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ                                              ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ         MetalLB                     ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  IP Pool: .100-.150                ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ                                              ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ    Traefik Ingress Controller      ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ    LoadBalancer IP: .100           ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ                                              ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ      Boardgame Application         ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ      Replicas: 2                   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ      HPA: 2-10 pods                ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 16.4 –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞

**–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- VM: 8
- vCPU: 24
- RAM: 46GB
- Storage: 360GB

**Kubernetes:**
- Nodes: 3 (1 master + 2 workers)
- Namespaces: 4 (default, kube-system, traefik, metallb-system)
- Deployments: 1
- Services: 2
- Ingresses: 1

**CI/CD:**
- Stages: 11
- Build time: ~10-15 –º–∏–Ω—É—Ç
- Artifacts: JAR, Docker Image, Reports
- Notifications: Email (Success/Failure)

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
- Metrics: 500+ time series
- Dashboards: 4
- Alerts: 5 rules

---

## üìä –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

**–ó–∞–ø—É—Å–∫ –Ω–æ–≤–æ–≥–æ build:**
```bash
# –ß–µ—Ä–µ–∑ Jenkins UI
Jenkins ‚Üí boardgame-pipeline ‚Üí Build Now

# –ß–µ—Ä–µ–∑ API
curl -X POST https://jenkins.your-domain.com/job/boardgame-pipeline/build \
  --user admin:YOUR_API_TOKEN
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
```bash
kubectl get all -n default -l app=boardgame
```

**–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:**
```bash
kubectl logs -f deployment/boardgame -n default
```

**–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```bash
kubectl scale deployment boardgame --replicas=5 -n default
```

**–û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏:**
```bash
kubectl rollout undo deployment/boardgame -n default
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**Grafana Dashboards:**
1. **Node Exporter** - –°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤
2. **Jenkins Performance** - –ú–µ—Ç—Ä–∏–∫–∏ CI/CD
3. **Blackbox Exporter** - –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
4. **Kubernetes** - –ú–µ—Ç—Ä–∏–∫–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞

**–í–∞–∂–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- Response Time: < 500ms
- Success Rate: > 99%
- CPU Usage: < 80%
- Memory Usage: < 85%
- Disk Usage: < 80%

### –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:**

```bash
# K3s
curl -sfL https://get.k3s.io | INSTALL_K3S_VERSION=v1.29.0+k3s1 sh -

# Jenkins plugins
Jenkins ‚Üí Manage Jenkins ‚Üí Manage Plugins ‚Üí Updates ‚Üí Update all

# Docker images
docker pull sonarqube:lts-community
docker pull sonatype/nexus3:latest
```

**–û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤:**

```bash
# Docker –Ω–∞ Jenkins
ssh ubuntu@192.168.100.20
docker system prune -a -f

# Nexus - —á–µ—Ä–µ–∑ UI
# Nexus ‚Üí Repository ‚Üí Cleanup policies

# Harbor - —á–µ—Ä–µ–∑ UI
# Harbor ‚Üí Projects ‚Üí library ‚Üí Repositories ‚Üí Tag Retention
```

---

## üíæ Backup –∏ Recovery

### Backup —Å–∫—Ä–∏–ø—Ç

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `/root/backup-devops.sh` –Ω–∞ Proxmox —Ö–æ—Å—Ç–µ:

```bash
#!/bin/bash

BACKUP_ROOT="/backup/devops"
DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_DIR="${BACKUP_ROOT}/${DATE}"

mkdir -p ${BACKUP_DIR}

echo "Starting backup at ${DATE}"

# Backup K3s etcd snapshots
echo "Backing up K3s etcd..."
ssh ubuntu@192.168.100.10 "sudo k3s etcd-snapshot save --name backup-${DATE}"
scp ubuntu@192.168.100.10:/var/lib/rancher/k3s/server/db/snapshots/* ${BACKUP_DIR}/k3s-snapshots/

# Backup Kubernetes manifests
echo "Backing up Kubernetes resources..."
ssh ubuntu@192.168.100.10 "kubectl get all,ingress,configmap,secret,pv,pvc --all-namespaces -o yaml" > ${BACKUP_DIR}/k8s-resources.yaml

# Backup Jenkins
echo "Backing up Jenkins..."
rsync -avz --exclude='workspace' --exclude='caches' \
  ubuntu@192.168.100.20:/var/lib/jenkins/ ${BACKUP_DIR}/jenkins/

# Backup SonarQube database
echo "Backing up SonarQube..."
ssh ubuntu@192.168.100.30 "docker exec sonarqube sh -c 'pg_dump -U sonar sonar' | gzip" > ${BACKUP_DIR}/sonarqube-db.sql.gz

# Backup Nexus data
echo "Backing up Nexus..."
ssh ubuntu@192.168.100.31 "docker exec nexus tar czf - /nexus-data" > ${BACKUP_DIR}/nexus-data.tar.gz

# Backup Harbor
echo "Backing up Harbor..."
ssh ubuntu@192.168.100.32 "cd /root/harbor && docker-compose exec -T database pg_dumpall -U postgres" | gzip > ${BACKUP_DIR}/harbor-db.sql.gz

# Backup Prometheus data
echo "Backing up Prometheus..."
rsync -avz ubuntu@192.168.100.40:~/monitoring/prometheus_data/ ${BACKUP_DIR}/prometheus/

# Backup Grafana
echo "Backing up Grafana..."
rsync -avz ubuntu@192.168.100.40:~/monitoring/grafana_data/ ${BACKUP_DIR}/grafana/

# Cleanup old backups (keep last 7 days)
find ${BACKUP_ROOT} -type d -mtime +7 -exec rm -rf {} \;

echo "Backup completed: ${BACKUP_DIR}"
echo "Backup size: $(du -sh ${BACKUP_DIR} | cut -f1)"
```

–°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:

```bash
chmod +x /root/backup-devops.sh
```

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ cron:

```bash
crontab -e

# –î–æ–±–∞–≤—å—Ç–µ: –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 2:00 AM
0 2 * * * /root/backup-devops.sh >> /var/log/devops-backup.log 2>&1
```

### Recovery –ø—Ä–æ—Ü–µ–¥—É—Ä–∞

**–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ K3s:**

```bash
# –ù–∞ master node
sudo k3s server \
  --cluster-init \
  --cluster-reset \
  --cluster-reset-restore-path=/path/to/snapshot
```

**–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ Jenkins:**

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Jenkins
sudo systemctl stop jenkins

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ
sudo rsync -avz /backup/devops/DATE/jenkins/ /var/lib/jenkins/

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∞
sudo chown -R jenkins:jenkins /var/lib/jenkins

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ Jenkins
sudo systemctl start jenkins
```

**–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ.**

---

## ‚ùì FAQ

### Q: –ù—É–∂–µ–Ω –ª–∏ –º–Ω–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π IP –∞–¥—Ä–µ—Å?

**A:** –ù–µ—Ç. Cloudflare Tunnel —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ IP. –û–Ω —Å–æ–∑–¥–∞–µ—Ç –∏—Å—Ö–æ–¥—è—â–µ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –æ—Ç –≤–∞—à–µ–≥–æ Proxmox —Ö–æ—Å—Ç–∞ –∫ Cloudflare.

### Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –¥–æ–º–µ–Ω –≤–º–µ—Å—Ç–æ Cloudflare?

**A:** –î–∞, –Ω–æ —Ç–æ–≥–¥–∞ –≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è:
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π IP –∏–ª–∏ DDNS
- –ü—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤ –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ
- SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (Let's Encrypt)
- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã: ngrok, Tailscale, WireGuard

### Q: –°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç?

**A:** –ë–µ—Å–ø–ª–∞—Ç–Ω–æ! –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã open-source. –ù—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ:
- –°–µ—Ä–≤–µ—Ä —Å Proxmox (–≤–∞—à —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
- –î–æ–º–µ–Ω (~$10/–≥–æ–¥, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- Cloudflare (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω)

### Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ–Ω—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤?

**A:** –î–∞, –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- 3 VM (1 –¥–ª—è K3s, 1 –¥–ª—è Jenkins+tools, 1 –¥–ª—è monitoring)
- 12 vCPU, 24GB RAM, 150GB Storage
- –£–º–µ–Ω—å—à–∏—Ç–µ replicas –¥–æ 1
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ single-node K3s

### Q: –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ —ç—Ç–æ —Å Windows Hyper-V / VMware?

**A:** –î–∞, –∫–æ–Ω—Ü–µ–ø—Ü–∏—è —Ç–∞ –∂–µ. –ò–∑–º–µ–Ω–∏—Ç–µ —Ç–æ–ª—å–∫–æ:
- Terraform provider (–¥–ª—è Hyper-V/VMware)
- –°–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –û—Å—Ç–∞–ª—å–Ω–æ–µ –∏–¥–µ–Ω—Ç–∏—á–Ω–æ

### Q: –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –µ—â–µ –æ–¥–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ?

**A:** 
1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Git repo
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Jenkins job
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ—Ç –∂–µ Jenkinsfile –∫–∞–∫ —à–∞–±–ª–æ–Ω
4. Deploy –≤ —Ç–æ—Ç –∂–µ K8s –∫–ª–∞—Å—Ç–µ—Ä
5. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Ingress —Å –¥—Ä—É–≥–∏–º hostname

### Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å GitLab –≤–º–µ—Å—Ç–æ GitHub?

**A:** –î–∞! –ò–∑–º–µ–Ω–∏—Ç–µ –≤ Jenkinsfile:
- Git URL –Ω–∞ GitLab
- Credentials –¥–ª—è GitLab
- Webhook URL
- –û—Å—Ç–∞–ª—å–Ω–æ–µ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ

### Q: –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ —É –º–µ–Ω—è –Ω–µ—Ç –¥–æ–º–µ–Ω–∞?

**A:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
- Free domains: freenom.com, afraid.org
- Cloudflare Tunnel —Å –∏—Ö –ø–æ–¥–¥–æ–º–µ–Ω–æ–º
- –õ–æ–∫–∞–ª—å–Ω—ã–π DNS (bind9) –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å–µ—Ç–∏
- IP –∞–¥—Ä–µ—Å–∞ –Ω–∞–ø—Ä—è–º—É—é –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### Q: –ö–∞–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∑–∞—Ç—Ä–∞—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤?

**A:** –í Grafana –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–∞—à–±–æ—Ä–¥—ã –¥–ª—è:
- CPU/Memory –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- Disk usage
- Network traffic
- K8s pod resources

### Q: –ë–µ–∑–æ–ø–∞—Å–Ω–æ –ª–∏ —ç—Ç–æ –¥–ª—è production?

**A:** –ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –æ–±—É—á–µ–Ω–∏—è. –î–ª—è production –¥–æ–±–∞–≤—å—Ç–µ:
- –ù–∞—Å—Ç–æ—è—â–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- –ë–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–µ Network Policies
- Secrets management (Vault)
- Regular security updates
- Monitoring alerts
- Incident response plan

---

## ü§ù Contributing

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –æ–±—É—á–µ–Ω–∏—è. –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏ —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è!

**–ö–∞–∫ –≤–Ω–µ—Å—Ç–∏ –≤–∫–ª–∞–¥:**

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add some AmazingFeature'`)
4. Push –≤ branch (`git push origin feature/AmazingFeature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

**–ò–¥–µ–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è:**
- [ ] –î–æ–±–∞–≤–∏—Ç—å ArgoCD –¥–ª—è GitOps
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Slack –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å EFK (Elasticsearch, Fluentd, Kibana) stack
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Vault –¥–ª—è secrets
- [ ] –î–æ–±–∞–≤–∏—Ç—å Istio service mesh
- [ ] –°–æ–∑–¥–∞—Ç—å Ansible playbooks –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å Terraform modules
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Jira

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –°–º. —Ñ–∞–π–ª `LICENSE` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

---

## üìß –ö–æ–Ω—Ç–∞–∫—Ç—ã

**–ê–≤—Ç–æ—Ä:** –í–∞—à–µ –ò–º—è  
**Email:** your.email@example.com  
**GitHub:** [@yourusername](https://github.com/yourusername)  
**LinkedIn:** [Your LinkedIn](https://linkedin.com/in/yourprofile)

---

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- [Aditya Jaiswal](https://github.com/jaiswaladi246) - –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç
- Kubernetes Community
- CNCF Projects
- HashiCorp Terraform
- Cloudflare
- –í—Å–µ open-source contributors

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- [Kubernetes](https://kubernetes.io/docs/)
- [K3s](https://docs.k3s.io/)
- [Jenkins](https://www.jenkins.io/doc/)
- [Terraform](https://www.terraform.io/docs/)
- [Proxmox](https://pve.proxmox.com/wiki/)

**–û–±—É—á–∞—é—â–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:**
- [Kubernetes Tutorial](https://kubernetes.io/docs/tutorials/)
- [Jenkins Pipeline Tutorial](https://www.jenkins.io/doc/book/pipeline/)
- [Docker Documentation](https://docs.docker.com/)
- [Prometheus Documentation](https://prometheus.io/docs/)

**–°–æ–æ–±—â–µ—Å—Ç–≤–∞:**
- [Kubernetes Slack](https://slack.k8s.io/)
- [DevOps Subreddit](https://reddit.com/r/devops)
- [CNCF Slack](https://cloud-native.slack.com/)

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~1500
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:** 20+
- **VM:** 8
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:** 15+
- **–°–µ—Ä–≤–∏—Å–æ–≤:** 10+
- **–í—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏:** 2-3 —á–∞—Å–∞
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –û–°:** Ubuntu 22.04
- **Kubernetes –≤–µ—Ä—Å–∏—è:** 1.28+

---

**‚≠ê –ï—Å–ª–∏ —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø–æ–º–æ–≥ –≤–∞–º, –ø–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤–µ–∑–¥—É –Ω–∞ GitHub!**

**üöÄ –£–¥–∞—á–∏ —Å –≤–∞—à–∏–º DevOps –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ–º!**

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2024*

*–í–µ—Ä—Å–∏—è: 1.0.0*
                
